Lifting input expression to x86 IR...
=====================================

"Building Expr:"
(load
 (buffer multiplied_no_offsets 'uint32)
 (ramp (sca-add (var-lookup 't5895) 4) 1 8)
 (aligned 4 0))
"Fold templates"
'()
here()

"Replace templates"
'()
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (load
 (buffer multiplied_no_offsets 'uint32)
 (ramp (sca-add (var-lookup 't5895) 4) 1 8)
 (aligned 4 0))
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (load
 (buffer multiplied_no_offsets 'uint32)
 (ramp (sca-add (var-lookup 't5895) 4) 1 8)
 (aligned 4 0))
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint32_t
 (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))))
optimized x86 0:
  (uint32_t
 (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))))
Ran synthesizer for 21 ms
(model
 [idx$0 0])
(load
 (buffer multiplied_no_offsets 'uint32)
 (ramp (sca-add (var-lookup 't5895) 4) 1 8)
 (aligned 4 0))
#<load-data>
Ran bounds analysis for 31 ms
Ran bounds analysis for 22 ms
"Extended success?"
#t
#<load-data>
"Building Expr:"
(load
 (buffer mat_b 'uint8)
 (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
 (aligned 4 0))
"Fold templates"
'()
here()

"Replace templates"
'()
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (load
 (buffer mat_b 'uint8)
 (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
 (aligned 4 0))
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (load
 (buffer mat_b 'uint8)
 (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
 (aligned 4 0))
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint8_t (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))
optimized x86 0:
  (uint8_t (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))
Ran synthesizer for 18 ms
(model
 [idx$65 0])
(load
 (buffer mat_b 'uint8)
 (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
 (aligned 4 0))
#<load-data>
Ran bounds analysis for 18 ms
Ran bounds analysis for 10 ms
"Extended success?"
#t
#<load-data>
"Building Expr:"
(vec-cast
 (load
  (buffer mat_b 'uint8)
  (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
  (aligned 4 0))
 'uint16
 8)
"Fold templates"
'(#<load-data>)
here(#<load-data>)

"Replace templates"
'()
run-x86-synthesizer
halide-expr:
  (vec-cast
 (load
  (buffer mat_b 'uint8)
  (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
  (aligned 4 0))
 'uint16
 8)
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-cast
 (load
  (buffer mat_b 'uint8)
  (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
  (aligned 4 0))
 'uint16
 8)
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint16_t
 (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 16)))
optimized x86 0:
  (uint8_t (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))
Ran synthesizer for 1 ms
(unsat)
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (vec-cast
 (load
  (buffer mat_b 'uint8)
  (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
  (aligned 4 0))
 'uint16
 8)
template:
  (cast ... #<load-data> 'uint16 #f)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-cast #<abstr-halide-expr> 'uint16 8)
optimized-template:
  (cast ... #<abstr-expr> 'uint16 #f)
optimized Halide 0:
  (uint16_t (zero-extend (app abstr-vals$194 0) (bitvector 16)))
optimized x86 0:
  (uint16_t (zero-extend (app abstr-vals$194 0) (bitvector 16)))
Ran synthesizer for 16 ms
(model)
(vec-cast #<abstr-halide-expr> 'uint16 8)
(cast ... #<load-data> 'uint16 #f)
Ran bounds analysis for 20 ms
Ran bounds analysis for 13 ms
"Extended success?"
#t
(cast ... #<load-data> 'uint16 #f)
"Building Expr:"
(sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
"Fold templates"
'()
here()

"Replace templates"
'()
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
template:
  (broadcast ... (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
axioms:
  '()
optimized-halide-expr:
  (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
optimized-template:
  (broadcast ... (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
optimized Halide 0:
  (uint8_t
 (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))))
optimized x86 0:
  (uint8_t
 (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))))
Ran synthesizer for 14 ms
(model)
(sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
(broadcast ... (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
Ran bounds analysis for 18 ms
Ran bounds analysis for 11 ms
"Extended success?"
#t
(broadcast ... (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
"Building Expr:"
(vec-cast
 (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
 'uint16
 8)
"Fold templates"
'()
here()

"Replace templates"
'()
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (vec-cast
 (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
 'uint16
 8)
template:
  (cast
 ...
 (broadcast ... (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
 'uint16
 #f)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-cast #<abstr-halide-expr> 'uint16 8)
optimized-template:
  (cast ... #<abstr-expr> 'uint16 #f)
optimized Halide 0:
  (uint16_t (zero-extend (app abstr-vals$197 0) (bitvector 16)))
optimized x86 0:
  (uint16_t (zero-extend (app abstr-vals$197 0) (bitvector 16)))
Ran synthesizer for 15 ms
(model)
(vec-cast #<abstr-halide-expr> 'uint16 8)
(cast
 ...
 (broadcast ... (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
 'uint16
 #f)
Ran bounds analysis for 20 ms
Ran bounds analysis for 12 ms
"Extended success?"
#t
(cast
 ...
 (broadcast ... (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
 'uint16
 #f)
"Building Expr:"
(vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
   (aligned 4 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
  'uint16
  8))
"Fold templates"
(list
 #<load-data>
 (cast ... #<load-data> 'uint16 x?$199)
 (cast
  ...
  (broadcast ... (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
  'uint16
  x?$264))
here(#<load-data> #(struct:cast ... #<load-data> uint16 x?$199) #(struct:cast ... #(struct:broadcast ... #(struct:load-sca #(struct:buffer mat_a uint8) #<var-lookup: t5371>)) uint16 x?$264))

(list (vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))) #f #f #f 'uint16) (vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))) #f #f #f 'uint16) (vv-mpy-add ... #<load-data> '(1) (! x?$457) (! x?$458) (! x?$459) 'uint16) (vv-mpy-add ... #<load-data> '(1) (! x?$460) (! x?$461) (! x?$462) 'uint16))
(list (vs-mpy-add ... (broadcast ... (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))) (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))) #f #f #f 'uint16) (vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))) #f #f #f 'uint16) (vv-mpy-add ... (broadcast ... (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))) '(1) (! x?$655) (! x?$656) (! x?$657) 'uint16) (vv-mpy-add ... #<load-data> '(1) (! x?$658) (! x?$659) (! x?$660) 'uint16))
"Replace templates"
(list
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
  #f
  #f
  #f
  'uint16)
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
  #f
  #f
  #f
  'uint16)
 (vv-mpy-add ... #<load-data> '(1) (! x?$457) (! x?$458) (! x?$459) 'uint16)
 (vv-mpy-add ... #<load-data> '(1) (! x?$460) (! x?$461) (! x?$462) 'uint16)
 (vs-mpy-add
  ...
  (broadcast ... (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
  (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
  #f
  #f
  #f
  'uint16)
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
  #f
  #f
  #f
  'uint16)
 (vv-mpy-add
  ...
  (broadcast ... (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
  '(1)
  (! x?$655)
  (! x?$656)
  (! x?$657)
  'uint16)
 (vv-mpy-add ... #<load-data> '(1) (! x?$658) (! x?$659) (! x?$660) 'uint16))
run-x86-synthesizer
halide-expr:
  (vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
   (aligned 4 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
  'uint16
  8))
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
   (aligned 4 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
  'uint16
  8))
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint16_t
 (bvmul (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 16)) (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16))))
optimized x86 0:
  (uint8_t (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))
run-x86-synthesizer
halide-expr:
  (vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
   (aligned 4 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
  'uint16
  8))
template:
  (cast ... #<load-data> 'uint16 x?$199)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-mul
 (vec-cast #<abstr-halide-expr> 'uint16 8)
 (vec-cast
  (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
  'uint16
  8))
optimized-template:
  (cast ... #<abstr-expr> 'uint16 x?$199)
optimized Halide 0:
  (uint16_t
 (bvmul (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16)) (zero-extend (app abstr-vals$661 0) (bitvector 16))))
optimized x86 0:
  (uint16_t (zero-extend (app abstr-vals$661 0) (bitvector 16)))
run-x86-synthesizer
halide-expr:
  (vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
   (aligned 4 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
  'uint16
  8))
template:
  (vs-mpy-add
 ...
 #<load-data>
 (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
 #f
 #f
 #f
 'uint16)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-mul
 (vec-cast #<abstr-halide-expr> 'uint16 8)
 (vec-cast
  (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
  'uint16
  8))
optimized-template:
  (vs-mpy-add
 ...
 #<abstr-expr>
 (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
 #f
 #f
 #f
 'uint16)
optimized Halide 0:
  (uint16_t
 (bvmul (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16)) (zero-extend (app abstr-vals$662 0) (bitvector 16))))
optimized x86 0:
  (uint16_t
 (bvmul (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16)) (zero-extend (app abstr-vals$662 0) (bitvector 16))))
Ran synthesizer for 16 ms
(model)
(vec-mul
 (vec-cast #<abstr-halide-expr> 'uint16 8)
 (vec-cast
  (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
  'uint16
  8))
(vs-mpy-add
 ...
 #<load-data>
 (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
 #f
 #f
 #f
 'uint16)
Ran bounds analysis for 24 ms
Ran bounds analysis for 19 ms
"Success?"
#t
(vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))) #f #f #f 'uint16)
"Building Expr:"
(vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
    (aligned 4 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
   'uint16
   8))
 'uint32
 8)
"Fold templates"
(list
 #<load-data>
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
  x?$664
  x?$665
  x?$666
  'uint16))
here(#<load-data> #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #<var-lookup: t5371>)) x?$664 x?$665 x?$666 uint16))

"Replace templates"
'()
run-x86-synthesizer
halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
    (aligned 4 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
   'uint16
   8))
 'uint32
 8)
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
    (aligned 4 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
   'uint16
   8))
 'uint32
 8)
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint32_t
 (zero-extend (bvmul (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 16)) (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16))) (bitvector 32)))
optimized x86 0:
  (uint8_t (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))
run-x86-synthesizer
halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
    (aligned 4 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
   'uint16
   8))
 'uint32
 8)
template:
  (vs-mpy-add
 ...
 #<load-data>
 (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
 x?$664
 x?$665
 x?$666
 'uint16)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast #<abstr-halide-expr> 'uint16 8)
  (vec-cast
   (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
   'uint16
   8))
 'uint32
 8)
optimized-template:
  (vs-mpy-add
 ...
 #<abstr-expr>
 (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
 x?$664
 x?$665
 x?$666
 'uint16)
optimized Halide 0:
  (uint32_t
 (zero-extend (bvmul (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16)) (zero-extend (app abstr-vals$732 0) (bitvector 16))) (bitvector 32)))
optimized x86 0:
  (uint16_t
 (ite* (⊢ (&& (! x?$666) (! (&& x?$664 x?$666))) (ite x?$664 (bvadd (ite x?$665 (bv #x0001 16) (bv #x0000 16)) (ite (bvule (bvmul (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16)) (zero-extend (app abstr-vals$732 0) (bitvector 16))) (bvadd (bv #xffff 16) (bvneg (ite x?$665 (bv #x0001 16) (bv #x0000 16))))) (bvmul (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16)) (zero-extend (app abstr-vals$732 0) (bitvector 16))) (bvadd (bv #xffff 16) (bvneg (ite x?$665 (bv #x0001 16) (bv #x0000 16)))))) (bvadd (bvmul (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16)) (zero-extend (app abstr-vals$732 0) (bitvector 16))) (ite x?$665 (bv #x0001 16) (bv #x0000 16))))) (⊢ (|| (&& x?$664 x?$666) (&& x?$666 (! (&& x?$664 x?$666)))) (bvlshr (ite x?$664 (bvadd (ite x?$665 (bv #x0001 16) (bv #x0000 16)) (ite (bvule (bvmul (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16)) (zero-extend (app abstr-vals$732 0) (bitvector 16))) (bvadd (bv #xffff 16) (bvneg (ite x?$665 (bv #x0001 16) (bv #x0000 16))))) (bvmul (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16)) (zero-extend (app abstr-vals$732 0) (bitvector 16))) (bvadd (bv #xffff 16) (bvneg (ite x?$665 (bv #x0001 16) (bv #x0000 16)))))) (bvadd (bvmul (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16)) (zero-extend (app abstr-vals$732 0) (bitvector 16))) (ite x?$665 (bv #x0001 16) (bv #x0000 16)))) (bv #x0001 16)))))
Ran synthesizer for 2 ms
(unsat)
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
    (aligned 4 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
   'uint16
   8))
 'uint32
 8)
template:
  (cast
 ...
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
  #f
  #f
  #f
  'uint16)
 'uint32
 #f)
axioms:
  (list (forall (idx) (bvule (app abstr-vals$733 idx) (bv #xfe01 16))))
optimized-halide-expr:
  (vec-cast #<abstr-halide-expr> 'uint32 8)
optimized-template:
  (cast ... #<abstr-expr> 'uint32 #f)
optimized Halide 0:
  (uint32_t (zero-extend (app abstr-vals$733 0) (bitvector 32)))
optimized x86 0:
  (uint32_t (zero-extend (app abstr-vals$733 0) (bitvector 32)))
Ran synthesizer for 30 ms
(model)
(vec-cast #<abstr-halide-expr> 'uint32 8)
(cast
 ...
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
  #f
  #f
  #f
  'uint16)
 'uint32
 #f)
Ran bounds analysis for 23 ms
Ran bounds analysis for 17 ms
"Extended success?"
#t
(cast
 ...
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
  #f
  #f
  #f
  'uint16)
 'uint32
 #f)
"Building Expr:"
(vec-add
 (load
  (buffer multiplied_no_offsets 'uint32)
  (ramp (sca-add (var-lookup 't5895) 4) 1 8)
  (aligned 4 0))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
     (aligned 4 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
    'uint16
    8))
  'uint32
  8))
"Fold templates"
(list
 #<load-data>
 #<load-data>
 (vs-mpy-add
  ...
  #<load-data>
  (list
   (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
   (union [x?$803 #(struct:load-sca
                    #(struct:buffer mat_a uint8)
                    #<var-lookup: t5371>)] [(! x?$803) #(struct:int8_t
                                                         (bv #x01 8))]))
  #f
  #f
  #f
  'uint32)
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
  #f
  x?$801
  #f
  'uint32)
 (vs-mpy-add
  ...
  (combine
   (vs-mpy-add
    ...
    #<load-data>
    (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
    #f
    #f
    #f
    'uint16)
   (union [x?$804 #<load-data>] [(! x?$804) #(struct:cast
                                              ...
                                              #(struct:vs-mpy-add
                                                ...
                                                #<load-data>
                                                (#(struct:load-sca
                                                   #(struct:buffer mat_a uint8)
                                                   #<var-lookup: t5371>))
                                                #f
                                                #f
                                                #f
                                                uint16)
                                              uint32
                                              #f)]))
  (list
   (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
   (int8_t (bv #x01 8)))
  #f
  #f
  #f
  'uint32)
 (cast
  ...
  (vs-mpy-add
   ...
   #<load-data>
   (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
   #f
   #f
   #f
   'uint16)
  'uint32
  x?$799))
here(#<load-data> #<load-data> #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #<var-lookup: t5371>) (union #:size 2 #:hash 544869119753287225)) #f #f #f uint32) #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #<var-lookup: t5371>)) #f x?$801 #f uint32) #(struct:vs-mpy-add ... #<combine: #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #<var-lookup: t5371>)) #f #f #f uint16) (union #:size 2 #:hash 410071445354)> (#(struct:load-sca #(struct:buffer mat_a uint8) #<var-lookup: t5371>) #(struct:int8_t (bv #x01 8))) #f #f #f uint32) #(struct:cast ... #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #<var-lookup: t5371>)) #f #f #f uint16) uint32 x?$799))

"Replace templates"
(list
 (vs-mpy-add
  ...
  (vs-mpy-add
   ...
   #<load-data>
   (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)))
   #f
   #f
   #f
   'uint16)
  (list (int8_t (bv #x01 8)) (int8_t (bv #x01 8)))
  (! x?$998)
  (! x?$999)
  (! x?$1000)
  'uint32))
run-x86-synthesizer
halide-expr:
  (vec-add
 (load
  (buffer multiplied_no_offsets 'uint32)
  (ramp (sca-add (var-lookup 't5895) 4) 1 8)
  (aligned 4 0))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
     (aligned 4 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
    'uint16
    8))
  'uint32
  8))
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-add
 (load
  (buffer multiplied_no_offsets 'uint32)
  (ramp (sca-add (var-lookup 't5895) 4) 1 8)
  (aligned 4 0))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
     (aligned 4 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
    'uint16
    8))
  'uint32
  8))
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint32_t
 (bvadd (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))) (zero-extend (bvmul (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 16)) (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16))) (bitvector 32))))
optimized x86 0:
  (union [(= 0 idx$735) #(struct:uint8_t
                        (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))] [(= 1 idx$735) #(struct:uint32_t
                                                                                                            (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))))])
run-x86-synthesizer
halide-expr:
  (vec-add
 (load
  (buffer multiplied_no_offsets 'uint32)
  (ramp (sca-add (var-lookup 't5895) 4) 1 8)
  (aligned 4 0))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
     (aligned 4 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
    'uint16
    8))
  'uint32
  8))
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-add
 (load
  (buffer multiplied_no_offsets 'uint32)
  (ramp (sca-add (var-lookup 't5895) 4) 1 8)
  (aligned 4 0))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
     (aligned 4 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
    'uint16
    8))
  'uint32
  8))
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint32_t
 (bvadd (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))) (zero-extend (bvmul (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 16)) (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16))) (bitvector 32))))
optimized x86 0:
  (union [(= 0 idx$933) #(struct:uint8_t
                        (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))] [(= 1 idx$933) #(struct:uint32_t
                                                                                                            (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))))])
run-x86-synthesizer
halide-expr:
  (vec-add
 (load
  (buffer multiplied_no_offsets 'uint32)
  (ramp (sca-add (var-lookup 't5895) 4) 1 8)
  (aligned 4 0))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
     (aligned 4 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
    'uint16
    8))
  'uint32
  8))
template:
  (vs-mpy-add
 ...
 #<load-data>
 (list
  (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
  (union [x?$803 #(struct:load-sca
                   #(struct:buffer mat_a uint8)
                   #<var-lookup: t5371>)] [(! x?$803) #(struct:int8_t
                                                        (bv #x01 8))]))
 #f
 #f
 #f
 'uint32)
axioms:
  '()
optimized-halide-expr:
  (vec-add
 (load
  (buffer multiplied_no_offsets 'uint32)
  (ramp (sca-add (var-lookup 't5895) 4) 1 8)
  (aligned 4 0))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
     (aligned 4 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
    'uint16
    8))
  'uint32
  8))
optimized-template:
  (vs-mpy-add
 ...
 #<load-data>
 (list
  (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
  (union [x?$803 #(struct:load-sca
                   #(struct:buffer mat_a uint8)
                   #<var-lookup: t5371>)] [(! x?$803) #(struct:int8_t
                                                        (bv #x01 8))]))
 #f
 #f
 #f
 'uint32)
optimized Halide 0:
  (uint32_t
 (bvadd (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))) (zero-extend (bvmul (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 16)) (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16))) (bitvector 32))))
optimized x86 0:
  (uint32_t
 (bvadd (bvmul (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 32)) (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 32))) (bvmul (ite* (⊢ (= 0 idx$66) (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 32))) (⊢ (= 1 idx$66) (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))))) (ite x?$803 (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 32)) (bv #x00000001 32)))))
Ran synthesizer for 105 ms
(model
 [idx$66 1]
 [x?$803 #f])
(vec-add
 (load
  (buffer multiplied_no_offsets 'uint32)
  (ramp (sca-add (var-lookup 't5895) 4) 1 8)
  (aligned 4 0))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
     (aligned 4 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
    'uint16
    8))
  'uint32
  8))
(vs-mpy-add
 ...
 #<load-data>
 (list
  (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
  (int8_t (bv #x01 8)))
 #f
 #f
 #f
 'uint32)
Ran bounds analysis for 33 ms
Ran bounds analysis for 25 ms
"Success?"
#t
(vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) (int8_t (bv #x01 8))) #f #f #f 'uint32)
"Building Expr:"
(load
 (buffer mat_b 'uint8)
 (ramp
  (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
  1
  8)
 (aligned 1 0))
"Fold templates"
'()
here()

"Replace templates"
'()
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (load
 (buffer mat_b 'uint8)
 (ramp
  (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
  1
  8)
 (aligned 1 0))
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (load
 (buffer mat_b 'uint8)
 (ramp
  (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
  1
  8)
 (aligned 1 0))
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint8_t
 (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))))
optimized x86 0:
  (uint8_t
 (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))))
Ran synthesizer for 18 ms
(model
 [idx$1001 0])
(load
 (buffer mat_b 'uint8)
 (ramp
  (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
  1
  8)
 (aligned 1 0))
#<load-data>
Ran bounds analysis for 17 ms
Ran bounds analysis for 10 ms
"Extended success?"
#t
#<load-data>
"Building Expr:"
(vec-cast
 (load
  (buffer mat_b 'uint8)
  (ramp
   (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
   1
   8)
  (aligned 1 0))
 'uint16
 8)
"Fold templates"
'(#<load-data>)
here(#<load-data>)

"Replace templates"
'()
run-x86-synthesizer
halide-expr:
  (vec-cast
 (load
  (buffer mat_b 'uint8)
  (ramp
   (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
   1
   8)
  (aligned 1 0))
 'uint16
 8)
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-cast
 (load
  (buffer mat_b 'uint8)
  (ramp
   (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
   1
   8)
  (aligned 1 0))
 'uint16
 8)
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint16_t
 (zero-extend (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (bitvector 16)))
optimized x86 0:
  (uint8_t
 (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))))
Ran synthesizer for 1 ms
(unsat)
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (vec-cast
 (load
  (buffer mat_b 'uint8)
  (ramp
   (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
   1
   8)
  (aligned 1 0))
 'uint16
 8)
template:
  (cast ... #<load-data> 'uint16 #f)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-cast #<abstr-halide-expr> 'uint16 8)
optimized-template:
  (cast ... #<abstr-expr> 'uint16 #f)
optimized Halide 0:
  (uint16_t (zero-extend (app abstr-vals$1130 0) (bitvector 16)))
optimized x86 0:
  (uint16_t (zero-extend (app abstr-vals$1130 0) (bitvector 16)))
Ran synthesizer for 15 ms
(model)
(vec-cast #<abstr-halide-expr> 'uint16 8)
(cast ... #<load-data> 'uint16 #f)
Ran bounds analysis for 21 ms
Ran bounds analysis for 13 ms
"Extended success?"
#t
(cast ... #<load-data> 'uint16 #f)
"Building Expr:"
(sca-broadcast
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
 8)
"Fold templates"
'()
here()

"Replace templates"
'()
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (sca-broadcast
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
 8)
template:
  (broadcast
 ...
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
axioms:
  '()
optimized-halide-expr:
  (sca-broadcast
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
 8)
optimized-template:
  (broadcast
 ...
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
optimized Halide 0:
  (uint8_t
 (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))))
optimized x86 0:
  (uint8_t
 (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))))
Ran synthesizer for 15 ms
(model)
(sca-broadcast
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
 8)
(broadcast
 ...
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
Ran bounds analysis for 18 ms
Ran bounds analysis for 11 ms
"Extended success?"
#t
(broadcast
 ...
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
"Building Expr:"
(vec-cast
 (sca-broadcast
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
  8)
 'uint16
 8)
"Fold templates"
'()
here()

"Replace templates"
'()
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (vec-cast
 (sca-broadcast
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
  8)
 'uint16
 8)
template:
  (cast
 ...
 (broadcast
  ...
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
 'uint16
 #f)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-cast #<abstr-halide-expr> 'uint16 8)
optimized-template:
  (cast ... #<abstr-expr> 'uint16 #f)
optimized Halide 0:
  (uint16_t (zero-extend (app abstr-vals$1133 0) (bitvector 16)))
optimized x86 0:
  (uint16_t (zero-extend (app abstr-vals$1133 0) (bitvector 16)))
Ran synthesizer for 14 ms
(model)
(vec-cast #<abstr-halide-expr> 'uint16 8)
(cast
 ...
 (broadcast
  ...
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
 'uint16
 #f)
Ran bounds analysis for 19 ms
Ran bounds analysis for 12 ms
"Extended success?"
#t
(cast
 ...
 (broadcast
  ...
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
 'uint16
 #f)
"Building Expr:"
(vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp
    (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
    1
    8)
   (aligned 1 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
   8)
  'uint16
  8))
"Fold templates"
(list
 #<load-data>
 (cast ... #<load-data> 'uint16 x?$1135)
 (cast
  ...
  (broadcast
   ...
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
  'uint16
  x?$1200))
here(#<load-data> #(struct:cast ... #<load-data> uint16 x?$1135) #(struct:cast ... #(struct:broadcast ... #(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 1))) uint16 x?$1200))

(list (vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))) #f #f #f 'uint16) (vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))) #f #f #f 'uint16) (vv-mpy-add ... #<load-data> '(1) (! x?$1393) (! x?$1394) (! x?$1395) 'uint16) (vv-mpy-add ... #<load-data> '(1) (! x?$1396) (! x?$1397) (! x?$1398) 'uint16))
(list (vs-mpy-add ... (broadcast ... (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))) (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))) #f #f #f 'uint16) (vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))) #f #f #f 'uint16) (vv-mpy-add ... (broadcast ... (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))) '(1) (! x?$1591) (! x?$1592) (! x?$1593) 'uint16) (vv-mpy-add ... #<load-data> '(1) (! x?$1594) (! x?$1595) (! x?$1596) 'uint16))
"Replace templates"
(list
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
  #f
  #f
  #f
  'uint16)
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
  #f
  #f
  #f
  'uint16)
 (vv-mpy-add ... #<load-data> '(1) (! x?$1393) (! x?$1394) (! x?$1395) 'uint16)
 (vv-mpy-add ... #<load-data> '(1) (! x?$1396) (! x?$1397) (! x?$1398) 'uint16)
 (vs-mpy-add
  ...
  (broadcast
   ...
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
  #f
  #f
  #f
  'uint16)
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
  #f
  #f
  #f
  'uint16)
 (vv-mpy-add
  ...
  (broadcast
   ...
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
  '(1)
  (! x?$1591)
  (! x?$1592)
  (! x?$1593)
  'uint16)
 (vv-mpy-add
  ...
  #<load-data>
  '(1)
  (! x?$1594)
  (! x?$1595)
  (! x?$1596)
  'uint16))
run-x86-synthesizer
halide-expr:
  (vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp
    (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
    1
    8)
   (aligned 1 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
   8)
  'uint16
  8))
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp
    (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
    1
    8)
   (aligned 1 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
   8)
  'uint16
  8))
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint16_t
 (bvmul (zero-extend (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (bitvector 16)) (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))))
optimized x86 0:
  (uint8_t
 (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))))
run-x86-synthesizer
halide-expr:
  (vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp
    (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
    1
    8)
   (aligned 1 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
   8)
  'uint16
  8))
template:
  (cast ... #<load-data> 'uint16 x?$1135)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-mul
 (vec-cast #<abstr-halide-expr> 'uint16 8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
   8)
  'uint16
  8))
optimized-template:
  (cast ... #<abstr-expr> 'uint16 x?$1135)
optimized Halide 0:
  (uint16_t
 (bvmul (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$1597 0) (bitvector 16))))
optimized x86 0:
  (uint16_t (zero-extend (app abstr-vals$1597 0) (bitvector 16)))
run-x86-synthesizer
halide-expr:
  (vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp
    (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
    1
    8)
   (aligned 1 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
   8)
  'uint16
  8))
template:
  (vs-mpy-add
 ...
 #<load-data>
 (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
 #f
 #f
 #f
 'uint16)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-mul
 (vec-cast #<abstr-halide-expr> 'uint16 8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
   8)
  'uint16
  8))
optimized-template:
  (vs-mpy-add
 ...
 #<abstr-expr>
 (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
 #f
 #f
 #f
 'uint16)
optimized Halide 0:
  (uint16_t
 (bvmul (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$1598 0) (bitvector 16))))
optimized x86 0:
  (uint16_t
 (bvmul (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$1598 0) (bitvector 16))))
Ran synthesizer for 16 ms
(model)
(vec-mul
 (vec-cast #<abstr-halide-expr> 'uint16 8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
   8)
  'uint16
  8))
(vs-mpy-add
 ...
 #<load-data>
 (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
 #f
 #f
 #f
 'uint16)
Ran bounds analysis for 21 ms
Ran bounds analysis for 18 ms
"Success?"
#t
(vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))) #f #f #f 'uint16)
"Building Expr:"
(vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp
     (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
     1
     8)
    (aligned 1 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast
    (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
    8)
   'uint16
   8))
 'uint32
 8)
"Fold templates"
(list
 #<load-data>
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
  x?$1600
  x?$1601
  x?$1602
  'uint16))
here(#<load-data> #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 1))) x?$1600 x?$1601 x?$1602 uint16))

"Replace templates"
'()
run-x86-synthesizer
halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp
     (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
     1
     8)
    (aligned 1 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast
    (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
    8)
   'uint16
   8))
 'uint32
 8)
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp
     (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
     1
     8)
    (aligned 1 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast
    (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
    8)
   'uint16
   8))
 'uint32
 8)
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint32_t
 (zero-extend (bvmul (zero-extend (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (bitvector 16)) (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32)))
optimized x86 0:
  (uint8_t
 (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))))
run-x86-synthesizer
halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp
     (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
     1
     8)
    (aligned 1 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast
    (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
    8)
   'uint16
   8))
 'uint32
 8)
template:
  (vs-mpy-add
 ...
 #<load-data>
 (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
 x?$1600
 x?$1601
 x?$1602
 'uint16)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast #<abstr-halide-expr> 'uint16 8)
  (vec-cast
   (sca-broadcast
    (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
    8)
   'uint16
   8))
 'uint32
 8)
optimized-template:
  (vs-mpy-add
 ...
 #<abstr-expr>
 (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
 x?$1600
 x?$1601
 x?$1602
 'uint16)
optimized Halide 0:
  (uint32_t
 (zero-extend (bvmul (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$1668 0) (bitvector 16))) (bitvector 32)))
optimized x86 0:
  (uint16_t
 (ite* (⊢ (&& (! x?$1602) (! (&& x?$1600 x?$1602))) (ite x?$1600 (bvadd (ite x?$1601 (bv #x0001 16) (bv #x0000 16)) (ite (bvule (bvmul (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$1668 0) (bitvector 16))) (bvadd (bv #xffff 16) (bvneg (ite x?$1601 (bv #x0001 16) (bv #x0000 16))))) (bvmul (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$1668 0) (bitvector 16))) (bvadd (bv #xffff 16) (bvneg (ite x?$1601 (bv #x0001 16) (bv #x0000 16)))))) (bvadd (bvmul (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$1668 0) (bitvector 16))) (ite x?$1601 (bv #x0001 16) (bv #x0000 16))))) (⊢ (|| (&& x?$1600 x?$1602) (&& x?$1602 (! (&& x?$1600 x?$1602)))) (bvlshr (ite x?$1600 (bvadd (ite x?$1601 (bv #x0001 16) (bv #x0000 16)) (ite (bvule (bvmul (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$1668 0) (bitvector 16))) (bvadd (bv #xffff 16) (bvneg (ite x?$1601 (bv #x0001 16) (bv #x0000 16))))) (bvmul (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$1668 0) (bitvector 16))) (bvadd (bv #xffff 16) (bvneg (ite x?$1601 (bv #x0001 16) (bv #x0000 16)))))) (bvadd (bvmul (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$1668 0) (bitvector 16))) (ite x?$1601 (bv #x0001 16) (bv #x0000 16)))) (bv #x0001 16)))))
Ran synthesizer for 2 ms
(unsat)
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp
     (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
     1
     8)
    (aligned 1 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast
    (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
    8)
   'uint16
   8))
 'uint32
 8)
template:
  (cast
 ...
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
  #f
  #f
  #f
  'uint16)
 'uint32
 #f)
axioms:
  (list (forall (idx) (bvule (app abstr-vals$1669 idx) (bv #xfe01 16))))
optimized-halide-expr:
  (vec-cast #<abstr-halide-expr> 'uint32 8)
optimized-template:
  (cast ... #<abstr-expr> 'uint32 #f)
optimized Halide 0:
  (uint32_t (zero-extend (app abstr-vals$1669 0) (bitvector 32)))
optimized x86 0:
  (uint32_t (zero-extend (app abstr-vals$1669 0) (bitvector 32)))
Ran synthesizer for 30 ms
(model)
(vec-cast #<abstr-halide-expr> 'uint32 8)
(cast
 ...
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
  #f
  #f
  #f
  'uint16)
 'uint32
 #f)
Ran bounds analysis for 24 ms
Ran bounds analysis for 16 ms
"Extended success?"
#t
(cast
 ...
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
  #f
  #f
  #f
  'uint16)
 'uint32
 #f)
"Building Expr:"
(vec-add
 (vec-add
  (load
   (buffer multiplied_no_offsets 'uint32)
   (ramp (sca-add (var-lookup 't5895) 4) 1 8)
   (aligned 4 0))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
      (aligned 4 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
      1
      8)
     (aligned 1 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
     8)
    'uint16
    8))
  'uint32
  8))
"Fold templates"
(list
 #<load-data>
 (vs-mpy-add
  ...
  #<load-data>
  (list
   (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
   (int8_t (bv #x01 8))
   (union [(&& (! xi?$1674) (! xi?$1675)) #(struct:int8_t (bv #x01 8))] [(|| xi?$1674 (&& xi?$1675 (! xi?$1674))) #(struct:load-sca
                                                                                                                    #(struct:buffer
                                                                                                                      mat_a
                                                                                                                      uint8)
                                                                                                                    (union #:size 2 #:hash -967222290598905823))]))
  #f
  #f
  #f
  'uint32)
 (vs-mpy-add
  ...
  #<load-data>
  (list
   (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
   (int8_t (bv #x01 8)))
  #f
  x?$1672
  #f
  'uint32)
 (vs-mpy-add
  ...
  (combine
   (vs-mpy-add
    ...
    #<load-data>
    (list
     (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
     (int8_t (bv #x01 8)))
    #f
    #f
    #f
    'uint32)
   (union [x?$1676 #(struct:vs-mpy-add
                     ...
                     #<load-data>
                     (#(struct:load-sca
                        #(struct:buffer mat_a uint8)
                        #<var-lookup: t5371>)
                      #(struct:int8_t (bv #x01 8)))
                     #f
                     #f
                     #f
                     uint32)] [(! x?$1676) #(struct:cast
                                             ...
                                             #(struct:vs-mpy-add
                                               ...
                                               #<load-data>
                                               (#(struct:load-sca
                                                  #(struct:buffer mat_a uint8)
                                                  #(struct:sca-add
                                                    #<var-lookup: t5371>
                                                    1)))
                                               #f
                                               #f
                                               #f
                                               uint16)
                                             uint32
                                             #f)]))
  (list
   (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
   (int8_t (bv #x01 8))
   (int8_t (bv #x01 8)))
  #f
  #f
  #f
  'uint32)
 #<load-data>
 (vs-mpy-add
  ...
  #<load-data>
  '(#(struct:load-sca
      #(struct:buffer mat_a uint8)
      #(struct:sca-add #<var-lookup: t5371> 1))
    (union [(&& (! xi?$1873) (! xi?$1874)) #(struct:int8_t (bv #x01 8))] [(|| xi?$1873 (&& xi?$1874 (! xi?$1873))) #(struct:load-sca
                                                                                                                     #(struct:buffer
                                                                                                                       mat_a
                                                                                                                       uint8)
                                                                                                                     (union #:size 2 #:hash -967222290560866775))]))
  #f
  #f
  #f
  'uint32)
 (vs-mpy-add
  ...
  #<load-data>
  '(#(struct:load-sca
      #(struct:buffer mat_a uint8)
      #(struct:sca-add #<var-lookup: t5371> 1)))
  #f
  x?$1871
  #f
  'uint32)
 (vs-mpy-add
  ...
  (combine
   (vs-mpy-add
    ...
    #<load-data>
    '(#(struct:load-sca
        #(struct:buffer mat_a uint8)
        #(struct:sca-add #<var-lookup: t5371> 1)))
    #f
    #f
    #f
    'uint16)
   (union [x?$1875 #(struct:vs-mpy-add
                     ...
                     #<load-data>
                     (#(struct:load-sca
                        #(struct:buffer mat_a uint8)
                        #<var-lookup: t5371>)
                      #(struct:int8_t (bv #x01 8)))
                     #f
                     #f
                     #f
                     uint32)] [(! x?$1875) #(struct:cast
                                             ...
                                             #(struct:vs-mpy-add
                                               ...
                                               #<load-data>
                                               (#(struct:load-sca
                                                  #(struct:buffer mat_a uint8)
                                                  #(struct:sca-add
                                                    #<var-lookup: t5371>
                                                    1)))
                                               #f
                                               #f
                                               #f
                                               uint16)
                                             uint32
                                             #f)]))
  (list
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
   (int8_t (bv #x01 8)))
  #f
  #f
  #f
  'uint32)
 (cast
  ...
  (vs-mpy-add
   ...
   #<load-data>
   '(#(struct:load-sca
       #(struct:buffer mat_a uint8)
       #(struct:sca-add #<var-lookup: t5371> 1)))
   #f
   #f
   #f
   'uint16)
  'uint32
  x?$1869))
here(#<load-data> #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #<var-lookup: t5371>) #(struct:int8_t (bv #x01 8)) (union #:size 2 #:hash -1086153537407479068)) #f #f #f uint32) #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #<var-lookup: t5371>) #(struct:int8_t (bv #x01 8))) #f x?$1672 #f uint32) #(struct:vs-mpy-add ... #<combine: #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #<var-lookup: t5371>) #(struct:int8_t (bv #x01 8))) #f #f #f uint32) (union #:size 2 #:hash 409424481791)> (#(struct:load-sca #(struct:buffer mat_a uint8) #<var-lookup: t5371>) #(struct:int8_t (bv #x01 8)) #(struct:int8_t (bv #x01 8))) #f #f #f uint32) #<load-data> #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 1)) (union #:size 2 #:hash -1086153566535632437)) #f #f #f uint32) #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 1))) #f x?$1871 #f uint32) #(struct:vs-mpy-add ... #<combine: #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 1))) #f #f #f uint16) (union #:size 2 #:hash 409389264306)> (#(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 1)) #(struct:int8_t (bv #x01 8))) #f #f #f uint32) #(struct:cast ... #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 1))) #f #f #f uint16) uint32 x?$1869))

"Replace templates"
(list
 (vs-mpy-add
  ...
  (vs-mpy-add
   ...
   #<load-data>
   (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
   #f
   #f
   #f
   'uint16)
  (list (int8_t (bv #x01 8)) (int8_t (bv #x01 8)))
  (! x?$2070)
  (! x?$2071)
  (! x?$2072)
  'uint32))
run-x86-synthesizer
halide-expr:
  (vec-add
 (vec-add
  (load
   (buffer multiplied_no_offsets 'uint32)
   (ramp (sca-add (var-lookup 't5895) 4) 1 8)
   (aligned 4 0))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
      (aligned 4 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
      1
      8)
     (aligned 1 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
     8)
    'uint16
    8))
  'uint32
  8))
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-add
 (vec-add
  (load
   (buffer multiplied_no_offsets 'uint32)
   (ramp (sca-add (var-lookup 't5895) 4) 1 8)
   (aligned 4 0))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
      (aligned 4 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
      1
      8)
     (aligned 1 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
     8)
    'uint16
    8))
  'uint32
  8))
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint32_t
 (bvadd (bvadd (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))) (zero-extend (bvmul (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 16)) (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16))) (bitvector 32))) (zero-extend (bvmul (zero-extend (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (bitvector 16)) (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32))))
optimized x86 0:
  (union [(= 2 idx$1805) #(struct:uint32_t
                         (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))))] [(|| (= 0 idx$1805) (= 1 idx$1805)) #(struct:uint8_t
                                                                                                                                                                                                     (ite* (⊢ (= 0 idx$1805) (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))) (⊢ (= 1 idx$1805) (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))))])
run-x86-synthesizer
halide-expr:
  (vec-add
 (vec-add
  (load
   (buffer multiplied_no_offsets 'uint32)
   (ramp (sca-add (var-lookup 't5895) 4) 1 8)
   (aligned 4 0))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
      (aligned 4 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
      1
      8)
     (aligned 1 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
     8)
    'uint16
    8))
  'uint32
  8))
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-add
 (vec-add
  (load
   (buffer multiplied_no_offsets 'uint32)
   (ramp (sca-add (var-lookup 't5895) 4) 1 8)
   (aligned 4 0))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
      (aligned 4 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
      1
      8)
     (aligned 1 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
     8)
    'uint16
    8))
  'uint32
  8))
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint32_t
 (bvadd (bvadd (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))) (zero-extend (bvmul (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 16)) (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16))) (bitvector 32))) (zero-extend (bvmul (zero-extend (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (bitvector 16)) (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32))))
optimized x86 0:
  (union [(= 2 idx$2004) #(struct:uint32_t
                         (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))))] [(|| (= 0 idx$2004) (= 1 idx$2004)) #(struct:uint8_t
                                                                                                                                                                                                     (ite* (⊢ (= 0 idx$2004) (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))) (⊢ (= 1 idx$2004) (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))))])
run-x86-synthesizer
halide-expr:
  (vec-add
 (vec-add
  (load
   (buffer multiplied_no_offsets 'uint32)
   (ramp (sca-add (var-lookup 't5895) 4) 1 8)
   (aligned 4 0))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
      (aligned 4 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
      1
      8)
     (aligned 1 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
     8)
    'uint16
    8))
  'uint32
  8))
template:
  (vs-mpy-add
 ...
 #<load-data>
 (list
  (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
  (int8_t (bv #x01 8))
  (union [(&& (! xi?$1674) (! xi?$1675)) #(struct:int8_t (bv #x01 8))] [(|| xi?$1674 (&& xi?$1675 (! xi?$1674))) #(struct:load-sca
                                                                                                                   #(struct:buffer
                                                                                                                     mat_a
                                                                                                                     uint8)
                                                                                                                   (union #:size 2 #:hash -967222290598905823))]))
 #f
 #f
 #f
 'uint32)
axioms:
  '()
optimized-halide-expr:
  (vec-add
 (vec-add
  (load
   (buffer multiplied_no_offsets 'uint32)
   (ramp (sca-add (var-lookup 't5895) 4) 1 8)
   (aligned 4 0))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
      (aligned 4 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
      1
      8)
     (aligned 1 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
     8)
    'uint16
    8))
  'uint32
  8))
optimized-template:
  (vs-mpy-add
 ...
 #<load-data>
 (list
  (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
  (int8_t (bv #x01 8))
  (union [(&& (! xi?$1674) (! xi?$1675)) #(struct:int8_t (bv #x01 8))] [(|| xi?$1674 (&& xi?$1675 (! xi?$1674))) #(struct:load-sca
                                                                                                                   #(struct:buffer
                                                                                                                     mat_a
                                                                                                                     uint8)
                                                                                                                   (union #:size 2 #:hash -967222290598905823))]))
 #f
 #f
 #f
 'uint32)
optimized Halide 0:
  (uint32_t
 (bvadd (bvadd (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))) (zero-extend (bvmul (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 16)) (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16))) (bitvector 32))) (zero-extend (bvmul (zero-extend (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (bitvector 16)) (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32))))
optimized x86 0:
  (uint32_t
 (bvadd (bvadd (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))) (bvmul (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 32)) (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 32)))) (bvmul (ite* (⊢ (= 1 idx$67) (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4))))))) (⊢ (|| (= 0 idx$67) (= 2 idx$67)) (zero-extend (ite* (⊢ (= 0 idx$67) (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (⊢ (= 2 idx$67) (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))))) (bitvector 32)))) (ite* (⊢ (&& (! xi?$1674) (! xi?$1675)) (bv #x00000001 32)) (⊢ (|| xi?$1674 (&& xi?$1675 (! xi?$1674))) (zero-extend (app mat_a (ite* (⊢ xi?$1674 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (⊢ (&& xi?$1675 (! xi?$1674)) (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))))) (bitvector 32)))))))
Ran synthesizer for 220 ms
(model
 [idx$67 2]
 [xi?$1674 #f]
 [xi?$1675 #t])
(vec-add
 (vec-add
  (load
   (buffer multiplied_no_offsets 'uint32)
   (ramp (sca-add (var-lookup 't5895) 4) 1 8)
   (aligned 4 0))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
      (aligned 4 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
      1
      8)
     (aligned 1 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
     8)
    'uint16
    8))
  'uint32
  8))
(vs-mpy-add
 ...
 #<load-data>
 (list
  (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
  (int8_t (bv #x01 8))
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
 #f
 #f
 #f
 'uint32)
Ran bounds analysis for 35 ms
Ran bounds analysis for 29 ms
"Success?"
#t
(vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) (int8_t (bv #x01 8)) (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))) #f #f #f 'uint32)
"Building Expr:"
(load
 (buffer mat_b 'uint8)
 (ramp
  (sca-mul
   (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
   2)
  1
  8)
 (aligned 2 0))
"Fold templates"
'()
here()

"Replace templates"
'()
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (load
 (buffer mat_b 'uint8)
 (ramp
  (sca-mul
   (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
   2)
  1
  8)
 (aligned 2 0))
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (load
 (buffer mat_b 'uint8)
 (ramp
  (sca-mul
   (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
   2)
  1
  8)
 (aligned 2 0))
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint8_t
 (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))))
optimized x86 0:
  (uint8_t
 (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))))
Ran synthesizer for 18 ms
(model
 [idx$2073 0])
(load
 (buffer mat_b 'uint8)
 (ramp
  (sca-mul
   (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
   2)
  1
  8)
 (aligned 2 0))
#<load-data>
Ran bounds analysis for 16 ms
Ran bounds analysis for 11 ms
"Extended success?"
#t
#<load-data>
"Building Expr:"
(vec-cast
 (load
  (buffer mat_b 'uint8)
  (ramp
   (sca-mul
    (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
    2)
   1
   8)
  (aligned 2 0))
 'uint16
 8)
"Fold templates"
'(#<load-data>)
here(#<load-data>)

"Replace templates"
'()
run-x86-synthesizer
halide-expr:
  (vec-cast
 (load
  (buffer mat_b 'uint8)
  (ramp
   (sca-mul
    (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
    2)
   1
   8)
  (aligned 2 0))
 'uint16
 8)
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-cast
 (load
  (buffer mat_b 'uint8)
  (ramp
   (sca-mul
    (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
    2)
   1
   8)
  (aligned 2 0))
 'uint16
 8)
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint16_t
 (zero-extend (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))) (bitvector 16)))
optimized x86 0:
  (uint8_t
 (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))))
Ran synthesizer for 1 ms
(unsat)
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (vec-cast
 (load
  (buffer mat_b 'uint8)
  (ramp
   (sca-mul
    (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
    2)
   1
   8)
  (aligned 2 0))
 'uint16
 8)
template:
  (cast ... #<load-data> 'uint16 #f)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-cast #<abstr-halide-expr> 'uint16 8)
optimized-template:
  (cast ... #<abstr-expr> 'uint16 #f)
optimized Halide 0:
  (uint16_t (zero-extend (app abstr-vals$2202 0) (bitvector 16)))
optimized x86 0:
  (uint16_t (zero-extend (app abstr-vals$2202 0) (bitvector 16)))
Ran synthesizer for 18 ms
(model)
(vec-cast #<abstr-halide-expr> 'uint16 8)
(cast ... #<load-data> 'uint16 #f)
Ran bounds analysis for 22 ms
Ran bounds analysis for 13 ms
"Extended success?"
#t
(cast ... #<load-data> 'uint16 #f)
"Building Expr:"
(sca-broadcast
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
 8)
"Fold templates"
'()
here()

"Replace templates"
'()
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (sca-broadcast
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
 8)
template:
  (broadcast
 ...
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
axioms:
  '()
optimized-halide-expr:
  (sca-broadcast
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
 8)
optimized-template:
  (broadcast
 ...
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
optimized Halide 0:
  (uint8_t
 (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))))
optimized x86 0:
  (uint8_t
 (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))))
Ran synthesizer for 17 ms
(model)
(sca-broadcast
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
 8)
(broadcast
 ...
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
Ran bounds analysis for 19 ms
Ran bounds analysis for 11 ms
"Extended success?"
#t
(broadcast
 ...
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
"Building Expr:"
(vec-cast
 (sca-broadcast
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
  8)
 'uint16
 8)
"Fold templates"
'()
here()

"Replace templates"
'()
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (vec-cast
 (sca-broadcast
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
  8)
 'uint16
 8)
template:
  (cast
 ...
 (broadcast
  ...
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
 'uint16
 #f)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-cast #<abstr-halide-expr> 'uint16 8)
optimized-template:
  (cast ... #<abstr-expr> 'uint16 #f)
optimized Halide 0:
  (uint16_t (zero-extend (app abstr-vals$2205 0) (bitvector 16)))
optimized x86 0:
  (uint16_t (zero-extend (app abstr-vals$2205 0) (bitvector 16)))
Ran synthesizer for 16 ms
(model)
(vec-cast #<abstr-halide-expr> 'uint16 8)
(cast
 ...
 (broadcast
  ...
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
 'uint16
 #f)
Ran bounds analysis for 21 ms
Ran bounds analysis for 11 ms
"Extended success?"
#t
(cast
 ...
 (broadcast
  ...
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
 'uint16
 #f)
"Building Expr:"
(vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp
    (sca-mul
     (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
     2)
    1
    8)
   (aligned 2 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
   8)
  'uint16
  8))
"Fold templates"
(list
 #<load-data>
 (cast ... #<load-data> 'uint16 x?$2207)
 (cast
  ...
  (broadcast
   ...
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
  'uint16
  x?$2272))
here(#<load-data> #(struct:cast ... #<load-data> uint16 x?$2207) #(struct:cast ... #(struct:broadcast ... #(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 2))) uint16 x?$2272))

(list (vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))) #f #f #f 'uint16) (vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))) #f #f #f 'uint16) (vv-mpy-add ... #<load-data> '(1) (! x?$2465) (! x?$2466) (! x?$2467) 'uint16) (vv-mpy-add ... #<load-data> '(1) (! x?$2468) (! x?$2469) (! x?$2470) 'uint16))
(list (vs-mpy-add ... (broadcast ... (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))) (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))) #f #f #f 'uint16) (vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))) #f #f #f 'uint16) (vv-mpy-add ... (broadcast ... (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))) '(1) (! x?$2663) (! x?$2664) (! x?$2665) 'uint16) (vv-mpy-add ... #<load-data> '(1) (! x?$2666) (! x?$2667) (! x?$2668) 'uint16))
"Replace templates"
(list
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
  #f
  #f
  #f
  'uint16)
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
  #f
  #f
  #f
  'uint16)
 (vv-mpy-add ... #<load-data> '(1) (! x?$2465) (! x?$2466) (! x?$2467) 'uint16)
 (vv-mpy-add ... #<load-data> '(1) (! x?$2468) (! x?$2469) (! x?$2470) 'uint16)
 (vs-mpy-add
  ...
  (broadcast
   ...
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
  #f
  #f
  #f
  'uint16)
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
  #f
  #f
  #f
  'uint16)
 (vv-mpy-add
  ...
  (broadcast
   ...
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
  '(1)
  (! x?$2663)
  (! x?$2664)
  (! x?$2665)
  'uint16)
 (vv-mpy-add
  ...
  #<load-data>
  '(1)
  (! x?$2666)
  (! x?$2667)
  (! x?$2668)
  'uint16))
run-x86-synthesizer
halide-expr:
  (vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp
    (sca-mul
     (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
     2)
    1
    8)
   (aligned 2 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
   8)
  'uint16
  8))
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp
    (sca-mul
     (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
     2)
    1
    8)
   (aligned 2 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
   8)
  'uint16
  8))
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint16_t
 (bvmul (zero-extend (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))) (bitvector 16)) (zero-extend (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))))
optimized x86 0:
  (uint8_t
 (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))))
run-x86-synthesizer
halide-expr:
  (vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp
    (sca-mul
     (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
     2)
    1
    8)
   (aligned 2 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
   8)
  'uint16
  8))
template:
  (cast ... #<load-data> 'uint16 x?$2207)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-mul
 (vec-cast #<abstr-halide-expr> 'uint16 8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
   8)
  'uint16
  8))
optimized-template:
  (cast ... #<abstr-expr> 'uint16 x?$2207)
optimized Halide 0:
  (uint16_t
 (bvmul (zero-extend (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$2669 0) (bitvector 16))))
optimized x86 0:
  (uint16_t (zero-extend (app abstr-vals$2669 0) (bitvector 16)))
run-x86-synthesizer
halide-expr:
  (vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp
    (sca-mul
     (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
     2)
    1
    8)
   (aligned 2 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
   8)
  'uint16
  8))
template:
  (vs-mpy-add
 ...
 #<load-data>
 (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
 #f
 #f
 #f
 'uint16)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-mul
 (vec-cast #<abstr-halide-expr> 'uint16 8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
   8)
  'uint16
  8))
optimized-template:
  (vs-mpy-add
 ...
 #<abstr-expr>
 (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
 #f
 #f
 #f
 'uint16)
optimized Halide 0:
  (uint16_t
 (bvmul (zero-extend (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$2670 0) (bitvector 16))))
optimized x86 0:
  (uint16_t
 (bvmul (zero-extend (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$2670 0) (bitvector 16))))
Ran synthesizer for 15 ms
(model)
(vec-mul
 (vec-cast #<abstr-halide-expr> 'uint16 8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
   8)
  'uint16
  8))
(vs-mpy-add
 ...
 #<load-data>
 (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
 #f
 #f
 #f
 'uint16)
Ran bounds analysis for 22 ms
Ran bounds analysis for 17 ms
"Success?"
#t
(vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))) #f #f #f 'uint16)
"Building Expr:"
(vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp
     (sca-mul
      (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
      2)
     1
     8)
    (aligned 2 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast
    (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
    8)
   'uint16
   8))
 'uint32
 8)
"Fold templates"
(list
 #<load-data>
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
  x?$2672
  x?$2673
  x?$2674
  'uint16))
here(#<load-data> #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 2))) x?$2672 x?$2673 x?$2674 uint16))

"Replace templates"
'()
run-x86-synthesizer
halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp
     (sca-mul
      (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
      2)
     1
     8)
    (aligned 2 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast
    (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
    8)
   'uint16
   8))
 'uint32
 8)
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp
     (sca-mul
      (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
      2)
     1
     8)
    (aligned 2 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast
    (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
    8)
   'uint16
   8))
 'uint32
 8)
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint32_t
 (zero-extend (bvmul (zero-extend (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))) (bitvector 16)) (zero-extend (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32)))
optimized x86 0:
  (uint8_t
 (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))))
run-x86-synthesizer
halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp
     (sca-mul
      (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
      2)
     1
     8)
    (aligned 2 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast
    (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
    8)
   'uint16
   8))
 'uint32
 8)
template:
  (vs-mpy-add
 ...
 #<load-data>
 (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
 x?$2672
 x?$2673
 x?$2674
 'uint16)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast #<abstr-halide-expr> 'uint16 8)
  (vec-cast
   (sca-broadcast
    (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
    8)
   'uint16
   8))
 'uint32
 8)
optimized-template:
  (vs-mpy-add
 ...
 #<abstr-expr>
 (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
 x?$2672
 x?$2673
 x?$2674
 'uint16)
optimized Halide 0:
  (uint32_t
 (zero-extend (bvmul (zero-extend (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$2740 0) (bitvector 16))) (bitvector 32)))
optimized x86 0:
  (uint16_t
 (ite* (⊢ (&& (! x?$2674) (! (&& x?$2672 x?$2674))) (ite x?$2672 (bvadd (ite x?$2673 (bv #x0001 16) (bv #x0000 16)) (ite (bvule (bvmul (zero-extend (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$2740 0) (bitvector 16))) (bvadd (bv #xffff 16) (bvneg (ite x?$2673 (bv #x0001 16) (bv #x0000 16))))) (bvmul (zero-extend (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$2740 0) (bitvector 16))) (bvadd (bv #xffff 16) (bvneg (ite x?$2673 (bv #x0001 16) (bv #x0000 16)))))) (bvadd (bvmul (zero-extend (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$2740 0) (bitvector 16))) (ite x?$2673 (bv #x0001 16) (bv #x0000 16))))) (⊢ (|| (&& x?$2672 x?$2674) (&& x?$2674 (! (&& x?$2672 x?$2674)))) (bvlshr (ite x?$2672 (bvadd (ite x?$2673 (bv #x0001 16) (bv #x0000 16)) (ite (bvule (bvmul (zero-extend (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$2740 0) (bitvector 16))) (bvadd (bv #xffff 16) (bvneg (ite x?$2673 (bv #x0001 16) (bv #x0000 16))))) (bvmul (zero-extend (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$2740 0) (bitvector 16))) (bvadd (bv #xffff 16) (bvneg (ite x?$2673 (bv #x0001 16) (bv #x0000 16)))))) (bvadd (bvmul (zero-extend (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$2740 0) (bitvector 16))) (ite x?$2673 (bv #x0001 16) (bv #x0000 16)))) (bv #x0001 16)))))
Ran synthesizer for 2 ms
(unsat)
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp
     (sca-mul
      (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
      2)
     1
     8)
    (aligned 2 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast
    (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
    8)
   'uint16
   8))
 'uint32
 8)
template:
  (cast
 ...
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
  #f
  #f
  #f
  'uint16)
 'uint32
 #f)
axioms:
  (list (forall (idx) (bvule (app abstr-vals$2741 idx) (bv #xfe01 16))))
optimized-halide-expr:
  (vec-cast #<abstr-halide-expr> 'uint32 8)
optimized-template:
  (cast ... #<abstr-expr> 'uint32 #f)
optimized Halide 0:
  (uint32_t (zero-extend (app abstr-vals$2741 0) (bitvector 32)))
optimized x86 0:
  (uint32_t (zero-extend (app abstr-vals$2741 0) (bitvector 32)))
Ran synthesizer for 30 ms
(model)
(vec-cast #<abstr-halide-expr> 'uint32 8)
(cast
 ...
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
  #f
  #f
  #f
  'uint16)
 'uint32
 #f)
Ran bounds analysis for 24 ms
Ran bounds analysis for 16 ms
"Extended success?"
#t
(cast
 ...
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
  #f
  #f
  #f
  'uint16)
 'uint32
 #f)
"Building Expr:"
(vec-add
 (vec-add
  (vec-add
   (load
    (buffer multiplied_no_offsets 'uint32)
    (ramp (sca-add (var-lookup 't5895) 4) 1 8)
    (aligned 4 0))
   (vec-cast
    (vec-mul
     (vec-cast
      (load
       (buffer mat_b 'uint8)
       (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
       (aligned 4 0))
      'uint16
      8)
     (vec-cast
      (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
      'uint16
      8))
    'uint32
    8))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp
       (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
       1
       8)
      (aligned 1 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast
      (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
      8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-mul
       (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
       2)
      1
      8)
     (aligned 2 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
     8)
    'uint16
    8))
  'uint32
  8))
"Fold templates"
(list
 #<load-data>
 (vs-mpy-add
  ...
  #<load-data>
  (list
   (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
   (int8_t (bv #x01 8))
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
   (union [(&& (! xi?$2746) (&& (! xi?$2747) (! xi?$2748))) #(struct:int8_t
                                                              (bv #x01 8))] [(|| xi?$2746 (&& (! xi?$2746) (|| xi?$2747 (&& xi?$2748 (! xi?$2747))))) #(struct:load-sca
                                                                                                                                                        #(struct:buffer
                                                                                                                                                          mat_a
                                                                                                                                                          uint8)
                                                                                                                                                        (union #:size 2 #:hash -967222290370357004))]))
  #f
  #f
  #f
  'uint32)
 (vs-mpy-add
  ...
  #<load-data>
  (list
   (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
   (int8_t (bv #x01 8))
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
  #f
  x?$2744
  #f
  'uint32)
 (vs-mpy-add
  ...
  (combine
   (vs-mpy-add
    ...
    #<load-data>
    (list
     (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
     (int8_t (bv #x01 8))
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)))
    #f
    #f
    #f
    'uint32)
   (union [x?$2749 #(struct:vs-mpy-add
                     ...
                     #<load-data>
                     (#(struct:load-sca
                        #(struct:buffer mat_a uint8)
                        #<var-lookup: t5371>)
                      #(struct:int8_t (bv #x01 8))
                      #(struct:load-sca
                        #(struct:buffer mat_a uint8)
                        #(struct:sca-add #<var-lookup: t5371> 1)))
                     #f
                     #f
                     #f
                     uint32)] [(! x?$2749) #(struct:cast
                                             ...
                                             #(struct:vs-mpy-add
                                               ...
                                               #<load-data>
                                               (#(struct:load-sca
                                                  #(struct:buffer mat_a uint8)
                                                  #(struct:sca-add
                                                    #<var-lookup: t5371>
                                                    2)))
                                               #f
                                               #f
                                               #f
                                               uint16)
                                             uint32
                                             #f)]))
  (list
   (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
   (int8_t (bv #x01 8))
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
   (int8_t (bv #x01 8)))
  #f
  #f
  #f
  'uint32)
 #<load-data>
 (vs-mpy-add
  ...
  #<load-data>
  '(#(struct:load-sca
      #(struct:buffer mat_a uint8)
      #(struct:sca-add #<var-lookup: t5371> 2))
    (union [(&& (! xi?$2946) (&& (! xi?$2947) (! xi?$2948))) #(struct:int8_t
                                                               (bv #x01 8))] [(|| xi?$2946 (&& (! xi?$2946) (|| xi?$2947 (&& xi?$2948 (! xi?$2947))))) #(struct:load-sca
                                                                                                                                                         #(struct:buffer
                                                                                                                                                           mat_a
                                                                                                                                                           uint8)
                                                                                                                                                         (union #:size 2 #:hash -967222290357422924))]))
  #f
  #f
  #f
  'uint32)
 (vs-mpy-add
  ...
  #<load-data>
  '(#(struct:load-sca
      #(struct:buffer mat_a uint8)
      #(struct:sca-add #<var-lookup: t5371> 2)))
  #f
  x?$2944
  #f
  'uint32)
 (vs-mpy-add
  ...
  (combine
   (vs-mpy-add
    ...
    #<load-data>
    '(#(struct:load-sca
        #(struct:buffer mat_a uint8)
        #(struct:sca-add #<var-lookup: t5371> 2)))
    #f
    #f
    #f
    'uint16)
   (union [x?$2949 #(struct:vs-mpy-add
                     ...
                     #<load-data>
                     (#(struct:load-sca
                        #(struct:buffer mat_a uint8)
                        #<var-lookup: t5371>)
                      #(struct:int8_t (bv #x01 8))
                      #(struct:load-sca
                        #(struct:buffer mat_a uint8)
                        #(struct:sca-add #<var-lookup: t5371> 1)))
                     #f
                     #f
                     #f
                     uint32)] [(! x?$2949) #(struct:cast
                                             ...
                                             #(struct:vs-mpy-add
                                               ...
                                               #<load-data>
                                               (#(struct:load-sca
                                                  #(struct:buffer mat_a uint8)
                                                  #(struct:sca-add
                                                    #<var-lookup: t5371>
                                                    2)))
                                               #f
                                               #f
                                               #f
                                               uint16)
                                             uint32
                                             #f)]))
  (list
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
   (int8_t (bv #x01 8)))
  #f
  #f
  #f
  'uint32)
 (cast
  ...
  (vs-mpy-add
   ...
   #<load-data>
   '(#(struct:load-sca
       #(struct:buffer mat_a uint8)
       #(struct:sca-add #<var-lookup: t5371> 2)))
   #f
   #f
   #f
   'uint16)
  'uint32
  x?$2942))
here(#<load-data> #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #<var-lookup: t5371>) #(struct:int8_t (bv #x01 8)) #(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 1)) (union #:size 2 #:hash -1086153373922791873)) #f #f #f uint32) #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #<var-lookup: t5371>) #(struct:int8_t (bv #x01 8)) #(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 1))) #f x?$2744 #f uint32) #(struct:vs-mpy-add ... #<combine: #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #<var-lookup: t5371>) #(struct:int8_t (bv #x01 8)) #(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 1))) #f #f #f uint32) (union #:size 2 #:hash 406962100315)> (#(struct:load-sca #(struct:buffer mat_a uint8) #<var-lookup: t5371>) #(struct:int8_t (bv #x01 8)) #(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 1)) #(struct:int8_t (bv #x01 8))) #f #f #f uint32) #<load-data> #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 2)) (union #:size 2 #:hash -1086153251736878511)) #f #f #f uint32) #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 2))) #f x?$2944 #f uint32) #(struct:vs-mpy-add ... #<combine: #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 2))) #f #f #f uint16) (union #:size 2 #:hash 406973796448)> (#(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 2)) #(struct:int8_t (bv #x01 8))) #f #f #f uint32) #(struct:cast ... #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 2))) #f #f #f uint16) uint32 x?$2942))

"Replace templates"
(list
 (vs-mpy-add
  ...
  (vs-mpy-add
   ...
   #<load-data>
   (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
   #f
   #f
   #f
   'uint16)
  (list (int8_t (bv #x01 8)) (int8_t (bv #x01 8)))
  (! x?$3145)
  (! x?$3146)
  (! x?$3147)
  'uint32))
run-x86-synthesizer
halide-expr:
  (vec-add
 (vec-add
  (vec-add
   (load
    (buffer multiplied_no_offsets 'uint32)
    (ramp (sca-add (var-lookup 't5895) 4) 1 8)
    (aligned 4 0))
   (vec-cast
    (vec-mul
     (vec-cast
      (load
       (buffer mat_b 'uint8)
       (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
       (aligned 4 0))
      'uint16
      8)
     (vec-cast
      (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
      'uint16
      8))
    'uint32
    8))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp
       (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
       1
       8)
      (aligned 1 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast
      (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
      8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-mul
       (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
       2)
      1
      8)
     (aligned 2 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
     8)
    'uint16
    8))
  'uint32
  8))
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-add
 (vec-add
  (vec-add
   (load
    (buffer multiplied_no_offsets 'uint32)
    (ramp (sca-add (var-lookup 't5895) 4) 1 8)
    (aligned 4 0))
   (vec-cast
    (vec-mul
     (vec-cast
      (load
       (buffer mat_b 'uint8)
       (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
       (aligned 4 0))
      'uint16
      8)
     (vec-cast
      (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
      'uint16
      8))
    'uint32
    8))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp
       (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
       1
       8)
      (aligned 1 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast
      (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
      8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-mul
       (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
       2)
      1
      8)
     (aligned 2 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
     8)
    'uint16
    8))
  'uint32
  8))
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint32_t
 (bvadd (bvadd (bvadd (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))) (zero-extend (bvmul (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 16)) (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16))) (bitvector 32))) (zero-extend (bvmul (zero-extend (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (bitvector 16)) (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32))) (zero-extend (bvmul (zero-extend (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))) (bitvector 16)) (zero-extend (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32))))
optimized x86 0:
  (union [(= 2 idx$2878) #(struct:uint32_t
                         (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))))] [(|| (= 0 idx$2878) (= 1 idx$2878) (= 3 idx$2878)) #(struct:uint8_t
                                                                                                                                                                                                                    (ite* (⊢ (= 0 idx$2878) (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))) (⊢ (= 1 idx$2878) (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (⊢ (= 3 idx$2878) (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))))))])
run-x86-synthesizer
halide-expr:
  (vec-add
 (vec-add
  (vec-add
   (load
    (buffer multiplied_no_offsets 'uint32)
    (ramp (sca-add (var-lookup 't5895) 4) 1 8)
    (aligned 4 0))
   (vec-cast
    (vec-mul
     (vec-cast
      (load
       (buffer mat_b 'uint8)
       (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
       (aligned 4 0))
      'uint16
      8)
     (vec-cast
      (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
      'uint16
      8))
    'uint32
    8))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp
       (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
       1
       8)
      (aligned 1 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast
      (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
      8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-mul
       (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
       2)
      1
      8)
     (aligned 2 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
     8)
    'uint16
    8))
  'uint32
  8))
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-add
 (vec-add
  (vec-add
   (load
    (buffer multiplied_no_offsets 'uint32)
    (ramp (sca-add (var-lookup 't5895) 4) 1 8)
    (aligned 4 0))
   (vec-cast
    (vec-mul
     (vec-cast
      (load
       (buffer mat_b 'uint8)
       (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
       (aligned 4 0))
      'uint16
      8)
     (vec-cast
      (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
      'uint16
      8))
    'uint32
    8))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp
       (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
       1
       8)
      (aligned 1 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast
      (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
      8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-mul
       (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
       2)
      1
      8)
     (aligned 2 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
     8)
    'uint16
    8))
  'uint32
  8))
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint32_t
 (bvadd (bvadd (bvadd (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))) (zero-extend (bvmul (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 16)) (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16))) (bitvector 32))) (zero-extend (bvmul (zero-extend (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (bitvector 16)) (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32))) (zero-extend (bvmul (zero-extend (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))) (bitvector 16)) (zero-extend (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32))))
optimized x86 0:
  (union [(= 2 idx$3078) #(struct:uint32_t
                         (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))))] [(|| (= 0 idx$3078) (= 1 idx$3078) (= 3 idx$3078)) #(struct:uint8_t
                                                                                                                                                                                                                    (ite* (⊢ (= 0 idx$3078) (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))) (⊢ (= 1 idx$3078) (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (⊢ (= 3 idx$3078) (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))))))])
run-x86-synthesizer
halide-expr:
  (vec-add
 (vec-add
  (vec-add
   (load
    (buffer multiplied_no_offsets 'uint32)
    (ramp (sca-add (var-lookup 't5895) 4) 1 8)
    (aligned 4 0))
   (vec-cast
    (vec-mul
     (vec-cast
      (load
       (buffer mat_b 'uint8)
       (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
       (aligned 4 0))
      'uint16
      8)
     (vec-cast
      (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
      'uint16
      8))
    'uint32
    8))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp
       (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
       1
       8)
      (aligned 1 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast
      (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
      8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-mul
       (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
       2)
      1
      8)
     (aligned 2 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
     8)
    'uint16
    8))
  'uint32
  8))
template:
  (vs-mpy-add
 ...
 #<load-data>
 (list
  (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
  (int8_t (bv #x01 8))
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
  (union [(&& (! xi?$2746) (&& (! xi?$2747) (! xi?$2748))) #(struct:int8_t
                                                             (bv #x01 8))] [(|| xi?$2746 (&& (! xi?$2746) (|| xi?$2747 (&& xi?$2748 (! xi?$2747))))) #(struct:load-sca
                                                                                                                                                       #(struct:buffer
                                                                                                                                                         mat_a
                                                                                                                                                         uint8)
                                                                                                                                                       (union #:size 2 #:hash -967222290370357004))]))
 #f
 #f
 #f
 'uint32)
axioms:
  '()
optimized-halide-expr:
  (vec-add
 (vec-add
  (vec-add
   (load
    (buffer multiplied_no_offsets 'uint32)
    (ramp (sca-add (var-lookup 't5895) 4) 1 8)
    (aligned 4 0))
   (vec-cast
    (vec-mul
     (vec-cast
      (load
       (buffer mat_b 'uint8)
       (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
       (aligned 4 0))
      'uint16
      8)
     (vec-cast
      (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
      'uint16
      8))
    'uint32
    8))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp
       (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
       1
       8)
      (aligned 1 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast
      (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
      8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-mul
       (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
       2)
      1
      8)
     (aligned 2 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
     8)
    'uint16
    8))
  'uint32
  8))
optimized-template:
  (vs-mpy-add
 ...
 #<load-data>
 (list
  (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
  (int8_t (bv #x01 8))
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
  (union [(&& (! xi?$2746) (&& (! xi?$2747) (! xi?$2748))) #(struct:int8_t
                                                             (bv #x01 8))] [(|| xi?$2746 (&& (! xi?$2746) (|| xi?$2747 (&& xi?$2748 (! xi?$2747))))) #(struct:load-sca
                                                                                                                                                       #(struct:buffer
                                                                                                                                                         mat_a
                                                                                                                                                         uint8)
                                                                                                                                                       (union #:size 2 #:hash -967222290370357004))]))
 #f
 #f
 #f
 'uint32)
optimized Halide 0:
  (uint32_t
 (bvadd (bvadd (bvadd (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))) (zero-extend (bvmul (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 16)) (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16))) (bitvector 32))) (zero-extend (bvmul (zero-extend (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (bitvector 16)) (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32))) (zero-extend (bvmul (zero-extend (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))) (bitvector 16)) (zero-extend (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32))))
optimized x86 0:
  (uint32_t
 (bvadd (bvadd (bvadd (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))) (bvmul (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 32)) (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 32)))) (bvmul (zero-extend (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (bitvector 32)) (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 32)))) (bvmul (ite* (⊢ (= 1 idx$68) (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4))))))) (⊢ (|| (= 0 idx$68) (= 2 idx$68) (= 3 idx$68)) (zero-extend (ite* (⊢ (= 0 idx$68) (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (⊢ (= 2 idx$68) (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))) (⊢ (= 3 idx$68) (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))))) (bitvector 32)))) (ite* (⊢ (&& (! xi?$2746) (&& (! xi?$2747) (! xi?$2748))) (bv #x00000001 32)) (⊢ (|| xi?$2746 (&& (! xi?$2746) (|| xi?$2747 (&& xi?$2748 (! xi?$2747))))) (zero-extend (app mat_a (ite* (⊢ xi?$2746 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (⊢ (&& (! xi?$2746) (|| xi?$2747 (&& xi?$2748 (! xi?$2747)))) (+ (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))) (ite* (⊢ xi?$2747 2) (⊢ (&& xi?$2748 (! xi?$2747)) 1)))))) (bitvector 32)))))))
Ran synthesizer for 331 ms
(model
 [idx$68 3]
 [xi?$2746 #f]
 [xi?$2747 #t]
 [xi?$2748 #f])
(vec-add
 (vec-add
  (vec-add
   (load
    (buffer multiplied_no_offsets 'uint32)
    (ramp (sca-add (var-lookup 't5895) 4) 1 8)
    (aligned 4 0))
   (vec-cast
    (vec-mul
     (vec-cast
      (load
       (buffer mat_b 'uint8)
       (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
       (aligned 4 0))
      'uint16
      8)
     (vec-cast
      (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
      'uint16
      8))
    'uint32
    8))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp
       (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
       1
       8)
      (aligned 1 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast
      (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
      8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-mul
       (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
       2)
      1
      8)
     (aligned 2 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
     8)
    'uint16
    8))
  'uint32
  8))
(vs-mpy-add
 ...
 #<load-data>
 (list
  (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
  (int8_t (bv #x01 8))
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
 #f
 #f
 #f
 'uint32)
Ran bounds analysis for 64 ms
Ran bounds analysis for 37 ms
"Success?"
#t
(vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) (int8_t (bv #x01 8)) (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)) (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))) #f #f #f 'uint32)
"Building Expr:"
(load
 (buffer mat_b 'uint8)
 (ramp
  (sca-add
   (sca-mul (var-lookup 'mat_b.stride.1) 3)
   (sca-mul (var-lookup 't5370) 4))
  1
  8)
 (aligned 1 0))
"Fold templates"
'()
here()

"Replace templates"
'()
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (load
 (buffer mat_b 'uint8)
 (ramp
  (sca-add
   (sca-mul (var-lookup 'mat_b.stride.1) 3)
   (sca-mul (var-lookup 't5370) 4))
  1
  8)
 (aligned 1 0))
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (load
 (buffer mat_b 'uint8)
 (ramp
  (sca-add
   (sca-mul (var-lookup 'mat_b.stride.1) 3)
   (sca-mul (var-lookup 't5370) 4))
  1
  8)
 (aligned 1 0))
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint8_t
 (app mat_b (+ (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))) (+ -3 t6148))))
optimized x86 0:
  (uint8_t
 (app mat_b (+ (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))) (+ -3 t6148))))
Ran synthesizer for 19 ms
(model
 [idx$3148 0])
(load
 (buffer mat_b 'uint8)
 (ramp
  (sca-add
   (sca-mul (var-lookup 'mat_b.stride.1) 3)
   (sca-mul (var-lookup 't5370) 4))
  1
  8)
 (aligned 1 0))
#<load-data>
Ran bounds analysis for 17 ms
Ran bounds analysis for 10 ms
"Extended success?"
#t
#<load-data>
"Building Expr:"
(vec-cast
 (load
  (buffer mat_b 'uint8)
  (ramp
   (sca-add
    (sca-mul (var-lookup 'mat_b.stride.1) 3)
    (sca-mul (var-lookup 't5370) 4))
   1
   8)
  (aligned 1 0))
 'uint16
 8)
"Fold templates"
'(#<load-data>)
here(#<load-data>)

"Replace templates"
'()
run-x86-synthesizer
halide-expr:
  (vec-cast
 (load
  (buffer mat_b 'uint8)
  (ramp
   (sca-add
    (sca-mul (var-lookup 'mat_b.stride.1) 3)
    (sca-mul (var-lookup 't5370) 4))
   1
   8)
  (aligned 1 0))
 'uint16
 8)
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-cast
 (load
  (buffer mat_b 'uint8)
  (ramp
   (sca-add
    (sca-mul (var-lookup 'mat_b.stride.1) 3)
    (sca-mul (var-lookup 't5370) 4))
   1
   8)
  (aligned 1 0))
 'uint16
 8)
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint16_t
 (zero-extend (app mat_b (+ (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))) (+ -3 t6148))) (bitvector 16)))
optimized x86 0:
  (uint8_t
 (app mat_b (+ (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))) (+ -3 t6148))))
Ran synthesizer for 2 ms
(unsat)
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (vec-cast
 (load
  (buffer mat_b 'uint8)
  (ramp
   (sca-add
    (sca-mul (var-lookup 'mat_b.stride.1) 3)
    (sca-mul (var-lookup 't5370) 4))
   1
   8)
  (aligned 1 0))
 'uint16
 8)
template:
  (cast ... #<load-data> 'uint16 #f)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-cast #<abstr-halide-expr> 'uint16 8)
optimized-template:
  (cast ... #<abstr-expr> 'uint16 #f)
optimized Halide 0:
  (uint16_t (zero-extend (app abstr-vals$3277 0) (bitvector 16)))
optimized x86 0:
  (uint16_t (zero-extend (app abstr-vals$3277 0) (bitvector 16)))
Ran synthesizer for 14 ms
(model)
(vec-cast #<abstr-halide-expr> 'uint16 8)
(cast ... #<load-data> 'uint16 #f)
Ran bounds analysis for 20 ms
Ran bounds analysis for 11 ms
"Extended success?"
#t
(cast ... #<load-data> 'uint16 #f)
"Building Expr:"
(sca-broadcast
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
 8)
"Fold templates"
'()
here()

"Replace templates"
'()
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (sca-broadcast
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
 8)
template:
  (broadcast
 ...
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
axioms:
  '()
optimized-halide-expr:
  (sca-broadcast
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
 8)
optimized-template:
  (broadcast
 ...
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
optimized Halide 0:
  (uint8_t
 (app mat_a (+ 3 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))))
optimized x86 0:
  (uint8_t
 (app mat_a (+ 3 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))))
Ran synthesizer for 15 ms
(model)
(sca-broadcast
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
 8)
(broadcast
 ...
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
Ran bounds analysis for 18 ms
Ran bounds analysis for 11 ms
"Extended success?"
#t
(broadcast
 ...
 (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
"Building Expr:"
(vec-cast
 (sca-broadcast
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
  8)
 'uint16
 8)
"Fold templates"
'()
here()

"Replace templates"
'()
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (vec-cast
 (sca-broadcast
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
  8)
 'uint16
 8)
template:
  (cast
 ...
 (broadcast
  ...
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
 'uint16
 #f)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-cast #<abstr-halide-expr> 'uint16 8)
optimized-template:
  (cast ... #<abstr-expr> 'uint16 #f)
optimized Halide 0:
  (uint16_t (zero-extend (app abstr-vals$3280 0) (bitvector 16)))
optimized x86 0:
  (uint16_t (zero-extend (app abstr-vals$3280 0) (bitvector 16)))
Ran synthesizer for 14 ms
(model)
(vec-cast #<abstr-halide-expr> 'uint16 8)
(cast
 ...
 (broadcast
  ...
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
 'uint16
 #f)
Ran bounds analysis for 20 ms
Ran bounds analysis for 12 ms
"Extended success?"
#t
(cast
 ...
 (broadcast
  ...
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
 'uint16
 #f)
"Building Expr:"
(vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp
    (sca-add
     (sca-mul (var-lookup 'mat_b.stride.1) 3)
     (sca-mul (var-lookup 't5370) 4))
    1
    8)
   (aligned 1 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
   8)
  'uint16
  8))
"Fold templates"
(list
 #<load-data>
 (cast ... #<load-data> 'uint16 x?$3282)
 (cast
  ...
  (broadcast
   ...
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
  'uint16
  x?$3347))
here(#<load-data> #(struct:cast ... #<load-data> uint16 x?$3282) #(struct:cast ... #(struct:broadcast ... #(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 3))) uint16 x?$3347))

(list (vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))) #f #f #f 'uint16) (vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))) #f #f #f 'uint16) (vv-mpy-add ... #<load-data> '(1) (! x?$3540) (! x?$3541) (! x?$3542) 'uint16) (vv-mpy-add ... #<load-data> '(1) (! x?$3543) (! x?$3544) (! x?$3545) 'uint16))
(list (vs-mpy-add ... (broadcast ... (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))) (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))) #f #f #f 'uint16) (vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))) #f #f #f 'uint16) (vv-mpy-add ... (broadcast ... (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))) '(1) (! x?$3738) (! x?$3739) (! x?$3740) 'uint16) (vv-mpy-add ... #<load-data> '(1) (! x?$3741) (! x?$3742) (! x?$3743) 'uint16))
"Replace templates"
(list
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
  #f
  #f
  #f
  'uint16)
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
  #f
  #f
  #f
  'uint16)
 (vv-mpy-add ... #<load-data> '(1) (! x?$3540) (! x?$3541) (! x?$3542) 'uint16)
 (vv-mpy-add ... #<load-data> '(1) (! x?$3543) (! x?$3544) (! x?$3545) 'uint16)
 (vs-mpy-add
  ...
  (broadcast
   ...
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
  #f
  #f
  #f
  'uint16)
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
  #f
  #f
  #f
  'uint16)
 (vv-mpy-add
  ...
  (broadcast
   ...
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
  '(1)
  (! x?$3738)
  (! x?$3739)
  (! x?$3740)
  'uint16)
 (vv-mpy-add
  ...
  #<load-data>
  '(1)
  (! x?$3741)
  (! x?$3742)
  (! x?$3743)
  'uint16))
run-x86-synthesizer
halide-expr:
  (vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp
    (sca-add
     (sca-mul (var-lookup 'mat_b.stride.1) 3)
     (sca-mul (var-lookup 't5370) 4))
    1
    8)
   (aligned 1 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
   8)
  'uint16
  8))
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp
    (sca-add
     (sca-mul (var-lookup 'mat_b.stride.1) 3)
     (sca-mul (var-lookup 't5370) 4))
    1
    8)
   (aligned 1 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
   8)
  'uint16
  8))
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint16_t
 (bvmul (zero-extend (app mat_b (+ (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))) (+ -3 t6148))) (bitvector 16)) (zero-extend (app mat_a (+ 3 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))))
optimized x86 0:
  (uint8_t
 (app mat_b (+ (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))) (+ -3 t6148))))
run-x86-synthesizer
halide-expr:
  (vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp
    (sca-add
     (sca-mul (var-lookup 'mat_b.stride.1) 3)
     (sca-mul (var-lookup 't5370) 4))
    1
    8)
   (aligned 1 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
   8)
  'uint16
  8))
template:
  (cast ... #<load-data> 'uint16 x?$3282)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-mul
 (vec-cast #<abstr-halide-expr> 'uint16 8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
   8)
  'uint16
  8))
optimized-template:
  (cast ... #<abstr-expr> 'uint16 x?$3282)
optimized Halide 0:
  (uint16_t
 (bvmul (zero-extend (app mat_a (+ 3 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$3744 0) (bitvector 16))))
optimized x86 0:
  (uint16_t (zero-extend (app abstr-vals$3744 0) (bitvector 16)))
run-x86-synthesizer
halide-expr:
  (vec-mul
 (vec-cast
  (load
   (buffer mat_b 'uint8)
   (ramp
    (sca-add
     (sca-mul (var-lookup 'mat_b.stride.1) 3)
     (sca-mul (var-lookup 't5370) 4))
    1
    8)
   (aligned 1 0))
  'uint16
  8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
   8)
  'uint16
  8))
template:
  (vs-mpy-add
 ...
 #<load-data>
 (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
 #f
 #f
 #f
 'uint16)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-mul
 (vec-cast #<abstr-halide-expr> 'uint16 8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
   8)
  'uint16
  8))
optimized-template:
  (vs-mpy-add
 ...
 #<abstr-expr>
 (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
 #f
 #f
 #f
 'uint16)
optimized Halide 0:
  (uint16_t
 (bvmul (zero-extend (app mat_a (+ 3 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$3745 0) (bitvector 16))))
optimized x86 0:
  (uint16_t
 (bvmul (zero-extend (app mat_a (+ 3 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$3745 0) (bitvector 16))))
Ran synthesizer for 15 ms
(model)
(vec-mul
 (vec-cast #<abstr-halide-expr> 'uint16 8)
 (vec-cast
  (sca-broadcast
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
   8)
  'uint16
  8))
(vs-mpy-add
 ...
 #<load-data>
 (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
 #f
 #f
 #f
 'uint16)
Ran bounds analysis for 22 ms
Ran bounds analysis for 18 ms
"Success?"
#t
(vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))) #f #f #f 'uint16)
"Building Expr:"
(vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp
     (sca-add
      (sca-mul (var-lookup 'mat_b.stride.1) 3)
      (sca-mul (var-lookup 't5370) 4))
     1
     8)
    (aligned 1 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast
    (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
    8)
   'uint16
   8))
 'uint32
 8)
"Fold templates"
(list
 #<load-data>
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
  x?$3747
  x?$3748
  x?$3749
  'uint16))
here(#<load-data> #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 3))) x?$3747 x?$3748 x?$3749 uint16))

"Replace templates"
'()
run-x86-synthesizer
halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp
     (sca-add
      (sca-mul (var-lookup 'mat_b.stride.1) 3)
      (sca-mul (var-lookup 't5370) 4))
     1
     8)
    (aligned 1 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast
    (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
    8)
   'uint16
   8))
 'uint32
 8)
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp
     (sca-add
      (sca-mul (var-lookup 'mat_b.stride.1) 3)
      (sca-mul (var-lookup 't5370) 4))
     1
     8)
    (aligned 1 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast
    (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
    8)
   'uint16
   8))
 'uint32
 8)
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint32_t
 (zero-extend (bvmul (zero-extend (app mat_b (+ (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))) (+ -3 t6148))) (bitvector 16)) (zero-extend (app mat_a (+ 3 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32)))
optimized x86 0:
  (uint8_t
 (app mat_b (+ (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))) (+ -3 t6148))))
run-x86-synthesizer
halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp
     (sca-add
      (sca-mul (var-lookup 'mat_b.stride.1) 3)
      (sca-mul (var-lookup 't5370) 4))
     1
     8)
    (aligned 1 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast
    (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
    8)
   'uint16
   8))
 'uint32
 8)
template:
  (vs-mpy-add
 ...
 #<load-data>
 (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
 x?$3747
 x?$3748
 x?$3749
 'uint16)
axioms:
  '(#t)
optimized-halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast #<abstr-halide-expr> 'uint16 8)
  (vec-cast
   (sca-broadcast
    (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
    8)
   'uint16
   8))
 'uint32
 8)
optimized-template:
  (vs-mpy-add
 ...
 #<abstr-expr>
 (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
 x?$3747
 x?$3748
 x?$3749
 'uint16)
optimized Halide 0:
  (uint32_t
 (zero-extend (bvmul (zero-extend (app mat_a (+ 3 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$3815 0) (bitvector 16))) (bitvector 32)))
optimized x86 0:
  (uint16_t
 (ite* (⊢ (&& (! x?$3749) (! (&& x?$3747 x?$3749))) (ite x?$3747 (bvadd (ite x?$3748 (bv #x0001 16) (bv #x0000 16)) (ite (bvule (bvmul (zero-extend (app mat_a (+ 3 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$3815 0) (bitvector 16))) (bvadd (bv #xffff 16) (bvneg (ite x?$3748 (bv #x0001 16) (bv #x0000 16))))) (bvmul (zero-extend (app mat_a (+ 3 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$3815 0) (bitvector 16))) (bvadd (bv #xffff 16) (bvneg (ite x?$3748 (bv #x0001 16) (bv #x0000 16)))))) (bvadd (bvmul (zero-extend (app mat_a (+ 3 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$3815 0) (bitvector 16))) (ite x?$3748 (bv #x0001 16) (bv #x0000 16))))) (⊢ (|| (&& x?$3747 x?$3749) (&& x?$3749 (! (&& x?$3747 x?$3749)))) (bvlshr (ite x?$3747 (bvadd (ite x?$3748 (bv #x0001 16) (bv #x0000 16)) (ite (bvule (bvmul (zero-extend (app mat_a (+ 3 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$3815 0) (bitvector 16))) (bvadd (bv #xffff 16) (bvneg (ite x?$3748 (bv #x0001 16) (bv #x0000 16))))) (bvmul (zero-extend (app mat_a (+ 3 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$3815 0) (bitvector 16))) (bvadd (bv #xffff 16) (bvneg (ite x?$3748 (bv #x0001 16) (bv #x0000 16)))))) (bvadd (bvmul (zero-extend (app mat_a (+ 3 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16)) (zero-extend (app abstr-vals$3815 0) (bitvector 16))) (ite x?$3748 (bv #x0001 16) (bv #x0000 16)))) (bv #x0001 16)))))
Ran synthesizer for 2 ms
(unsat)
"Success?"
#f
#<void>
run-x86-synthesizer
halide-expr:
  (vec-cast
 (vec-mul
  (vec-cast
   (load
    (buffer mat_b 'uint8)
    (ramp
     (sca-add
      (sca-mul (var-lookup 'mat_b.stride.1) 3)
      (sca-mul (var-lookup 't5370) 4))
     1
     8)
    (aligned 1 0))
   'uint16
   8)
  (vec-cast
   (sca-broadcast
    (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
    8)
   'uint16
   8))
 'uint32
 8)
template:
  (cast
 ...
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
  #f
  #f
  #f
  'uint16)
 'uint32
 #f)
axioms:
  (list (forall (idx) (bvule (app abstr-vals$3816 idx) (bv #xfe01 16))))
optimized-halide-expr:
  (vec-cast #<abstr-halide-expr> 'uint32 8)
optimized-template:
  (cast ... #<abstr-expr> 'uint32 #f)
optimized Halide 0:
  (uint32_t (zero-extend (app abstr-vals$3816 0) (bitvector 32)))
optimized x86 0:
  (uint32_t (zero-extend (app abstr-vals$3816 0) (bitvector 32)))
Ran synthesizer for 29 ms
(model)
(vec-cast #<abstr-halide-expr> 'uint32 8)
(cast
 ...
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
  #f
  #f
  #f
  'uint16)
 'uint32
 #f)
Ran bounds analysis for 24 ms
Ran bounds analysis for 18 ms
"Extended success?"
#t
(cast
 ...
 (vs-mpy-add
  ...
  #<load-data>
  (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
  #f
  #f
  #f
  'uint16)
 'uint32
 #f)
"Building Expr:"
(vec-add
 (vec-add
  (vec-add
   (vec-add
    (load
     (buffer multiplied_no_offsets 'uint32)
     (ramp (sca-add (var-lookup 't5895) 4) 1 8)
     (aligned 4 0))
    (vec-cast
     (vec-mul
      (vec-cast
       (load
        (buffer mat_b 'uint8)
        (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
        (aligned 4 0))
       'uint16
       8)
      (vec-cast
       (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
       'uint16
       8))
     'uint32
     8))
   (vec-cast
    (vec-mul
     (vec-cast
      (load
       (buffer mat_b 'uint8)
       (ramp
        (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
        1
        8)
       (aligned 1 0))
      'uint16
      8)
     (vec-cast
      (sca-broadcast
       (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
       8)
      'uint16
      8))
    'uint32
    8))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp
       (sca-mul
        (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
        2)
       1
       8)
      (aligned 2 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast
      (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
      8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-add
       (sca-mul (var-lookup 'mat_b.stride.1) 3)
       (sca-mul (var-lookup 't5370) 4))
      1
      8)
     (aligned 1 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
     8)
    'uint16
    8))
  'uint32
  8))
"Fold templates"
(list
 #<load-data>
 (vs-mpy-add
  ...
  #<load-data>
  (list
   (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
   (int8_t (bv #x01 8))
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
   (union [(&& (! xi?$3821) (&& (! xi?$3822) (&& (! xi?$3823) (! xi?$3824)))) #(struct:int8_t
                                                                                (bv #x01 8))] [(|| xi?$3821 (&& (! xi?$3821) (|| xi?$3822 (&& (! xi?$3822) (|| xi?$3823 (&& xi?$3824 (! xi?$3823))))))) #(struct:load-sca
                                                                                                                                                                                                          #(struct:buffer
                                                                                                                                                                                                            mat_a
                                                                                                                                                                                                            uint8)
                                                                                                                                                                                                          (union #:size 2 #:hash -967222319836204915))]))
  #f
  #f
  #f
  'uint32)
 (vs-mpy-add
  ...
  #<load-data>
  (list
   (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
   (int8_t (bv #x01 8))
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
  #f
  x?$3819
  #f
  'uint32)
 (vs-mpy-add
  ...
  (combine
   (vs-mpy-add
    ...
    #<load-data>
    (list
     (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
     (int8_t (bv #x01 8))
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)))
    #f
    #f
    #f
    'uint32)
   (union [x?$3825 #(struct:vs-mpy-add
                     ...
                     #<load-data>
                     (#(struct:load-sca
                        #(struct:buffer mat_a uint8)
                        #<var-lookup: t5371>)
                      #(struct:int8_t (bv #x01 8))
                      #(struct:load-sca
                        #(struct:buffer mat_a uint8)
                        #(struct:sca-add #<var-lookup: t5371> 1))
                      #(struct:load-sca
                        #(struct:buffer mat_a uint8)
                        #(struct:sca-add #<var-lookup: t5371> 2)))
                     #f
                     #f
                     #f
                     uint32)] [(! x?$3825) #(struct:cast
                                             ...
                                             #(struct:vs-mpy-add
                                               ...
                                               #<load-data>
                                               (#(struct:load-sca
                                                  #(struct:buffer mat_a uint8)
                                                  #(struct:sca-add
                                                    #<var-lookup: t5371>
                                                    3)))
                                               #f
                                               #f
                                               #f
                                               uint16)
                                             uint32
                                             #f)]))
  (list
   (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
   (int8_t (bv #x01 8))
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
   (int8_t (bv #x01 8)))
  #f
  #f
  #f
  'uint32)
 #<load-data>
 (vs-mpy-add
  ...
  #<load-data>
  '(#(struct:load-sca
      #(struct:buffer mat_a uint8)
      #(struct:sca-add #<var-lookup: t5371> 3))
    (union [(&& (! xi?$4022) (&& (! xi?$4023) (&& (! xi?$4024) (! xi?$4025)))) #(struct:int8_t
                                                                                 (bv #x01 8))] [(|| xi?$4022 (&& (! xi?$4022) (|| xi?$4023 (&& (! xi?$4023) (|| xi?$4024 (&& xi?$4025 (! xi?$4024))))))) #(struct:load-sca
                                                                                                                                                                                                           #(struct:buffer
                                                                                                                                                                                                             mat_a
                                                                                                                                                                                                             uint8)
                                                                                                                                                                                                           (union #:size 2 #:hash -967222320023102428))]))
  #f
  #f
  #f
  'uint32)
 (vs-mpy-add
  ...
  #<load-data>
  '(#(struct:load-sca
      #(struct:buffer mat_a uint8)
      #(struct:sca-add #<var-lookup: t5371> 3)))
  #f
  x?$4020
  #f
  'uint32)
 (vs-mpy-add
  ...
  (combine
   (vs-mpy-add
    ...
    #<load-data>
    '(#(struct:load-sca
        #(struct:buffer mat_a uint8)
        #(struct:sca-add #<var-lookup: t5371> 3)))
    #f
    #f
    #f
    'uint16)
   (union [x?$4026 #(struct:vs-mpy-add
                     ...
                     #<load-data>
                     (#(struct:load-sca
                        #(struct:buffer mat_a uint8)
                        #<var-lookup: t5371>)
                      #(struct:int8_t (bv #x01 8))
                      #(struct:load-sca
                        #(struct:buffer mat_a uint8)
                        #(struct:sca-add #<var-lookup: t5371> 1))
                      #(struct:load-sca
                        #(struct:buffer mat_a uint8)
                        #(struct:sca-add #<var-lookup: t5371> 2)))
                     #f
                     #f
                     #f
                     uint32)] [(! x?$4026) #(struct:cast
                                             ...
                                             #(struct:vs-mpy-add
                                               ...
                                               #<load-data>
                                               (#(struct:load-sca
                                                  #(struct:buffer mat_a uint8)
                                                  #(struct:sca-add
                                                    #<var-lookup: t5371>
                                                    3)))
                                               #f
                                               #f
                                               #f
                                               uint16)
                                             uint32
                                             #f)]))
  (list
   (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
   (int8_t (bv #x01 8)))
  #f
  #f
  #f
  'uint32)
 (cast
  ...
  (vs-mpy-add
   ...
   #<load-data>
   '(#(struct:load-sca
       #(struct:buffer mat_a uint8)
       #(struct:sca-add #<var-lookup: t5371> 3)))
   #f
   #f
   #f
   'uint16)
  'uint32
  x?$4018))
here(#<load-data> #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #<var-lookup: t5371>) #(struct:int8_t (bv #x01 8)) #(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 1)) #(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 2)) (union #:size 2 #:hash -1085980725994995153)) #f #f #f uint32) #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #<var-lookup: t5371>) #(struct:int8_t (bv #x01 8)) #(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 1)) #(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 2))) #f x?$3819 #f uint32) #(struct:vs-mpy-add ... #<combine: #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #<var-lookup: t5371>) #(struct:int8_t (bv #x01 8)) #(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 1)) #(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 2))) #f #f #f uint32) (union #:size 2 #:hash 404611533892)> (#(struct:load-sca #(struct:buffer mat_a uint8) #<var-lookup: t5371>) #(struct:int8_t (bv #x01 8)) #(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 1)) #(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 2)) #(struct:int8_t (bv #x01 8))) #f #f #f uint32) #<load-data> #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 3)) (union #:size 2 #:hash -1085980532513942467)) #f #f #f uint32) #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 3))) #f x?$4020 #f uint32) #(struct:vs-mpy-add ... #<combine: #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 3))) #f #f #f uint16) (union #:size 2 #:hash 404716615731)> (#(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 3)) #(struct:int8_t (bv #x01 8))) #f #f #f uint32) #(struct:cast ... #(struct:vs-mpy-add ... #<load-data> (#(struct:load-sca #(struct:buffer mat_a uint8) #(struct:sca-add #<var-lookup: t5371> 3))) #f #f #f uint16) uint32 x?$4018))

"Replace templates"
(list
 (vs-mpy-add
  ...
  (vs-mpy-add
   ...
   #<load-data>
   (list (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
   #f
   #f
   #f
   'uint16)
  (list (int8_t (bv #x01 8)) (int8_t (bv #x01 8)))
  (! x?$4223)
  (! x?$4224)
  (! x?$4225)
  'uint32))
run-x86-synthesizer
halide-expr:
  (vec-add
 (vec-add
  (vec-add
   (vec-add
    (load
     (buffer multiplied_no_offsets 'uint32)
     (ramp (sca-add (var-lookup 't5895) 4) 1 8)
     (aligned 4 0))
    (vec-cast
     (vec-mul
      (vec-cast
       (load
        (buffer mat_b 'uint8)
        (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
        (aligned 4 0))
       'uint16
       8)
      (vec-cast
       (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
       'uint16
       8))
     'uint32
     8))
   (vec-cast
    (vec-mul
     (vec-cast
      (load
       (buffer mat_b 'uint8)
       (ramp
        (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
        1
        8)
       (aligned 1 0))
      'uint16
      8)
     (vec-cast
      (sca-broadcast
       (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
       8)
      'uint16
      8))
    'uint32
    8))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp
       (sca-mul
        (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
        2)
       1
       8)
      (aligned 2 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast
      (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
      8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-add
       (sca-mul (var-lookup 'mat_b.stride.1) 3)
       (sca-mul (var-lookup 't5370) 4))
      1
      8)
     (aligned 1 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
     8)
    'uint16
    8))
  'uint32
  8))
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-add
 (vec-add
  (vec-add
   (vec-add
    (load
     (buffer multiplied_no_offsets 'uint32)
     (ramp (sca-add (var-lookup 't5895) 4) 1 8)
     (aligned 4 0))
    (vec-cast
     (vec-mul
      (vec-cast
       (load
        (buffer mat_b 'uint8)
        (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
        (aligned 4 0))
       'uint16
       8)
      (vec-cast
       (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
       'uint16
       8))
     'uint32
     8))
   (vec-cast
    (vec-mul
     (vec-cast
      (load
       (buffer mat_b 'uint8)
       (ramp
        (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
        1
        8)
       (aligned 1 0))
      'uint16
      8)
     (vec-cast
      (sca-broadcast
       (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
       8)
      'uint16
      8))
    'uint32
    8))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp
       (sca-mul
        (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
        2)
       1
       8)
      (aligned 2 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast
      (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
      8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-add
       (sca-mul (var-lookup 'mat_b.stride.1) 3)
       (sca-mul (var-lookup 't5370) 4))
      1
      8)
     (aligned 1 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
     8)
    'uint16
    8))
  'uint32
  8))
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint32_t
 (bvadd (bvadd (bvadd (bvadd (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))) (zero-extend (bvmul (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 16)) (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16))) (bitvector 32))) (zero-extend (bvmul (zero-extend (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (bitvector 16)) (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32))) (zero-extend (bvmul (zero-extend (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))) (bitvector 16)) (zero-extend (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32))) (zero-extend (bvmul (zero-extend (app mat_b (+ (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))) (+ -3 t6148))) (bitvector 16)) (zero-extend (app mat_a (+ 3 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32))))
optimized x86 0:
  (union [(= 3 idx$3954) #(struct:uint32_t
                         (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))))] [(|| (= 0 idx$3954) (= 1 idx$3954) (= 2 idx$3954) (= 4 idx$3954)) #(struct:uint8_t
                                                                                                                                                                                                                                   (ite* (⊢ (= 0 idx$3954) (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))) (⊢ (= 1 idx$3954) (app mat_b (+ (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))) (+ -3 t6148)))) (⊢ (= 2 idx$3954) (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (⊢ (= 4 idx$3954) (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))))))])
run-x86-synthesizer
halide-expr:
  (vec-add
 (vec-add
  (vec-add
   (vec-add
    (load
     (buffer multiplied_no_offsets 'uint32)
     (ramp (sca-add (var-lookup 't5895) 4) 1 8)
     (aligned 4 0))
    (vec-cast
     (vec-mul
      (vec-cast
       (load
        (buffer mat_b 'uint8)
        (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
        (aligned 4 0))
       'uint16
       8)
      (vec-cast
       (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
       'uint16
       8))
     'uint32
     8))
   (vec-cast
    (vec-mul
     (vec-cast
      (load
       (buffer mat_b 'uint8)
       (ramp
        (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
        1
        8)
       (aligned 1 0))
      'uint16
      8)
     (vec-cast
      (sca-broadcast
       (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
       8)
      'uint16
      8))
    'uint32
    8))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp
       (sca-mul
        (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
        2)
       1
       8)
      (aligned 2 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast
      (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
      8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-add
       (sca-mul (var-lookup 'mat_b.stride.1) 3)
       (sca-mul (var-lookup 't5370) 4))
      1
      8)
     (aligned 1 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
     8)
    'uint16
    8))
  'uint32
  8))
template:
  #<load-data>
axioms:
  '()
optimized-halide-expr:
  (vec-add
 (vec-add
  (vec-add
   (vec-add
    (load
     (buffer multiplied_no_offsets 'uint32)
     (ramp (sca-add (var-lookup 't5895) 4) 1 8)
     (aligned 4 0))
    (vec-cast
     (vec-mul
      (vec-cast
       (load
        (buffer mat_b 'uint8)
        (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
        (aligned 4 0))
       'uint16
       8)
      (vec-cast
       (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
       'uint16
       8))
     'uint32
     8))
   (vec-cast
    (vec-mul
     (vec-cast
      (load
       (buffer mat_b 'uint8)
       (ramp
        (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
        1
        8)
       (aligned 1 0))
      'uint16
      8)
     (vec-cast
      (sca-broadcast
       (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
       8)
      'uint16
      8))
    'uint32
    8))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp
       (sca-mul
        (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
        2)
       1
       8)
      (aligned 2 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast
      (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
      8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-add
       (sca-mul (var-lookup 'mat_b.stride.1) 3)
       (sca-mul (var-lookup 't5370) 4))
      1
      8)
     (aligned 1 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
     8)
    'uint16
    8))
  'uint32
  8))
optimized-template:
  #<load-data>
optimized Halide 0:
  (uint32_t
 (bvadd (bvadd (bvadd (bvadd (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))) (zero-extend (bvmul (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 16)) (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16))) (bitvector 32))) (zero-extend (bvmul (zero-extend (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (bitvector 16)) (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32))) (zero-extend (bvmul (zero-extend (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))) (bitvector 16)) (zero-extend (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32))) (zero-extend (bvmul (zero-extend (app mat_b (+ (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))) (+ -3 t6148))) (bitvector 16)) (zero-extend (app mat_a (+ 3 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32))))
optimized x86 0:
  (union [(= 3 idx$4155) #(struct:uint32_t
                         (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))))] [(|| (= 0 idx$4155) (= 1 idx$4155) (= 2 idx$4155) (= 4 idx$4155)) #(struct:uint8_t
                                                                                                                                                                                                                                   (ite* (⊢ (= 0 idx$4155) (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))) (⊢ (= 1 idx$4155) (app mat_b (+ (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))) (+ -3 t6148)))) (⊢ (= 2 idx$4155) (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (⊢ (= 4 idx$4155) (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))))))])
run-x86-synthesizer
halide-expr:
  (vec-add
 (vec-add
  (vec-add
   (vec-add
    (load
     (buffer multiplied_no_offsets 'uint32)
     (ramp (sca-add (var-lookup 't5895) 4) 1 8)
     (aligned 4 0))
    (vec-cast
     (vec-mul
      (vec-cast
       (load
        (buffer mat_b 'uint8)
        (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
        (aligned 4 0))
       'uint16
       8)
      (vec-cast
       (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
       'uint16
       8))
     'uint32
     8))
   (vec-cast
    (vec-mul
     (vec-cast
      (load
       (buffer mat_b 'uint8)
       (ramp
        (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
        1
        8)
       (aligned 1 0))
      'uint16
      8)
     (vec-cast
      (sca-broadcast
       (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
       8)
      'uint16
      8))
    'uint32
    8))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp
       (sca-mul
        (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
        2)
       1
       8)
      (aligned 2 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast
      (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
      8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-add
       (sca-mul (var-lookup 'mat_b.stride.1) 3)
       (sca-mul (var-lookup 't5370) 4))
      1
      8)
     (aligned 1 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
     8)
    'uint16
    8))
  'uint32
  8))
template:
  (vs-mpy-add
 ...
 #<load-data>
 (list
  (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
  (int8_t (bv #x01 8))
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
  (union [(&& (! xi?$3821) (&& (! xi?$3822) (&& (! xi?$3823) (! xi?$3824)))) #(struct:int8_t
                                                                               (bv #x01 8))] [(|| xi?$3821 (&& (! xi?$3821) (|| xi?$3822 (&& (! xi?$3822) (|| xi?$3823 (&& xi?$3824 (! xi?$3823))))))) #(struct:load-sca
                                                                                                                                                                                                         #(struct:buffer
                                                                                                                                                                                                           mat_a
                                                                                                                                                                                                           uint8)
                                                                                                                                                                                                         (union #:size 2 #:hash -967222319836204915))]))
 #f
 #f
 #f
 'uint32)
axioms:
  '()
optimized-halide-expr:
  (vec-add
 (vec-add
  (vec-add
   (vec-add
    (load
     (buffer multiplied_no_offsets 'uint32)
     (ramp (sca-add (var-lookup 't5895) 4) 1 8)
     (aligned 4 0))
    (vec-cast
     (vec-mul
      (vec-cast
       (load
        (buffer mat_b 'uint8)
        (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
        (aligned 4 0))
       'uint16
       8)
      (vec-cast
       (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
       'uint16
       8))
     'uint32
     8))
   (vec-cast
    (vec-mul
     (vec-cast
      (load
       (buffer mat_b 'uint8)
       (ramp
        (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
        1
        8)
       (aligned 1 0))
      'uint16
      8)
     (vec-cast
      (sca-broadcast
       (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
       8)
      'uint16
      8))
    'uint32
    8))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp
       (sca-mul
        (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
        2)
       1
       8)
      (aligned 2 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast
      (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
      8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-add
       (sca-mul (var-lookup 'mat_b.stride.1) 3)
       (sca-mul (var-lookup 't5370) 4))
      1
      8)
     (aligned 1 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
     8)
    'uint16
    8))
  'uint32
  8))
optimized-template:
  (vs-mpy-add
 ...
 #<load-data>
 (list
  (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
  (int8_t (bv #x01 8))
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
  (union [(&& (! xi?$3821) (&& (! xi?$3822) (&& (! xi?$3823) (! xi?$3824)))) #(struct:int8_t
                                                                               (bv #x01 8))] [(|| xi?$3821 (&& (! xi?$3821) (|| xi?$3822 (&& (! xi?$3822) (|| xi?$3823 (&& xi?$3824 (! xi?$3823))))))) #(struct:load-sca
                                                                                                                                                                                                         #(struct:buffer
                                                                                                                                                                                                           mat_a
                                                                                                                                                                                                           uint8)
                                                                                                                                                                                                         (union #:size 2 #:hash -967222319836204915))]))
 #f
 #f
 #f
 'uint32)
optimized Halide 0:
  (uint32_t
 (bvadd (bvadd (bvadd (bvadd (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))) (zero-extend (bvmul (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 16)) (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 16))) (bitvector 32))) (zero-extend (bvmul (zero-extend (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (bitvector 16)) (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32))) (zero-extend (bvmul (zero-extend (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))) (bitvector 16)) (zero-extend (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32))) (zero-extend (bvmul (zero-extend (app mat_b (+ (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))) (+ -3 t6148))) (bitvector 16)) (zero-extend (app mat_a (+ 3 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 16))) (bitvector 32))))
optimized x86 0:
  (uint32_t
 (bvadd (bvadd (bvadd (bvadd (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4)))))) (bvmul (zero-extend (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))) (bitvector 32)) (zero-extend (app mat_a (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (bitvector 32)))) (bvmul (zero-extend (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (bitvector 32)) (zero-extend (app mat_a (+ 1 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 32)))) (bvmul (zero-extend (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))) (bitvector 32)) (zero-extend (app mat_a (+ 2 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))))) (bitvector 32)))) (bvmul (ite* (⊢ (= 1 idx$69) (app multiplied_no_offsets (+ 4 (+ t6188 (+ (+ -32 multiplied_no_offsets.s1.x.x) (- (ite (<= (+ -16 t6176) 4) (+ -16 t6176) 4))))))) (⊢ (|| (= 0 idx$69) (= 2 idx$69) (= 3 idx$69) (= 4 idx$69)) (zero-extend (ite* (⊢ (= 0 idx$69) (app mat_b (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))) (⊢ (= 2 idx$69) (app mat_b (+ t6148 (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x)))))) (⊢ (= 3 idx$69) (app mat_b (+ -2 (+ t6148 (+ -2 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))))))) (⊢ (= 4 idx$69) (app mat_b (+ (+ -4 (+ t6210 (+ -8 multiplied_no_offsets.s1.x.x))) (+ -3 t6148))))) (bitvector 32)))) (ite* (⊢ (&& (! xi?$3821) (&& (! xi?$3822) (&& (! xi?$3823) (! xi?$3824)))) (bv #x00000001 32)) (⊢ (|| xi?$3821 (&& (! xi?$3821) (|| xi?$3822 (&& (! xi?$3822) (|| xi?$3823 (&& xi?$3824 (! xi?$3823))))))) (zero-extend (app mat_a (ite* (⊢ xi?$3821 (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x))))) (⊢ (&& (! xi?$3821) (|| xi?$3822 (&& (! xi?$3822) (|| xi?$3823 (&& xi?$3824 (! xi?$3823)))))) (+ (+ t6184 (+ -4 (+ multiplied_no_offsets.s1.k$x.rki (+ -32 multiplied_no_offsets.s1.k$x.k$x)))) (ite* (⊢ xi?$3822 2) (⊢ (&& (! xi?$3822) (|| xi?$3823 (&& xi?$3824 (! xi?$3823)))) (ite* (⊢ xi?$3823 3) (⊢ (&& xi?$3824 (! xi?$3823)) 1)))))))) (bitvector 32)))))))
Ran synthesizer for 397 ms
(model
 [idx$69 4]
 [xi?$3821 #f]
 [xi?$3822 #f]
 [xi?$3823 #t]
 [xi?$3824 #f])
(vec-add
 (vec-add
  (vec-add
   (vec-add
    (load
     (buffer multiplied_no_offsets 'uint32)
     (ramp (sca-add (var-lookup 't5895) 4) 1 8)
     (aligned 4 0))
    (vec-cast
     (vec-mul
      (vec-cast
       (load
        (buffer mat_b 'uint8)
        (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
        (aligned 4 0))
       'uint16
       8)
      (vec-cast
       (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
       'uint16
       8))
     'uint32
     8))
   (vec-cast
    (vec-mul
     (vec-cast
      (load
       (buffer mat_b 'uint8)
       (ramp
        (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
        1
        8)
       (aligned 1 0))
      'uint16
      8)
     (vec-cast
      (sca-broadcast
       (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
       8)
      'uint16
      8))
    'uint32
    8))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp
       (sca-mul
        (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
        2)
       1
       8)
      (aligned 2 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast
      (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
      8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-add
       (sca-mul (var-lookup 'mat_b.stride.1) 3)
       (sca-mul (var-lookup 't5370) 4))
      1
      8)
     (aligned 1 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
     8)
    'uint16
    8))
  'uint32
  8))
(vs-mpy-add
 ...
 #<load-data>
 (list
  (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
  (int8_t (bv #x01 8))
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
 #f
 #f
 #f
 'uint32)
Ran bounds analysis for 99 ms
Ran bounds analysis for 75 ms
"Success?"
#t
(vs-mpy-add ... #<load-data> (list (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) (int8_t (bv #x01 8)) (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1)) (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2)) (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))) #f #f #f 'uint32)

(x86) Successfully found an equivalent IR expression.

(vs-mpy-add
 ...
 #<load-data>
 (list
  (load-sca (buffer mat_a 'uint8) (var-lookup 't5371))
  (int8_t (bv #x01 8))
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
  (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3)))
 #f
 #f
 #f
 'uint32)

Synthesis time: 4 seconds

Synthesizing x86 for:
(vec-add
 (vec-add
  (vec-add
   (vec-add
    (load
     (buffer multiplied_no_offsets 'uint32)
     (ramp (sca-add (var-lookup 't5895) 4) 1 8)
     (aligned 4 0))
    (vec-cast
     (vec-mul
      (vec-cast
       (load
        (buffer mat_b 'uint8)
        (ramp (sca-mul (var-lookup 't5370) 4) 1 8)
        (aligned 4 0))
       'uint16
       8)
      (vec-cast
       (sca-broadcast (load-sca (buffer mat_a 'uint8) (var-lookup 't5371)) 8)
       'uint16
       8))
     'uint32
     8))
   (vec-cast
    (vec-mul
     (vec-cast
      (load
       (buffer mat_b 'uint8)
       (ramp
        (sca-add (sca-mul (var-lookup 't5370) 4) (var-lookup 'mat_b.stride.1))
        1
        8)
       (aligned 1 0))
      'uint16
      8)
     (vec-cast
      (sca-broadcast
       (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 1))
       8)
      'uint16
      8))
    'uint32
    8))
  (vec-cast
   (vec-mul
    (vec-cast
     (load
      (buffer mat_b 'uint8)
      (ramp
       (sca-mul
        (sca-add (sca-mul (var-lookup 't5370) 2) (var-lookup 'mat_b.stride.1))
        2)
       1
       8)
      (aligned 2 0))
     'uint16
     8)
    (vec-cast
     (sca-broadcast
      (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 2))
      8)
     'uint16
     8))
   'uint32
   8))
 (vec-cast
  (vec-mul
   (vec-cast
    (load
     (buffer mat_b 'uint8)
     (ramp
      (sca-add
       (sca-mul (var-lookup 'mat_b.stride.1) 3)
       (sca-mul (var-lookup 't5370) 4))
      1
      8)
     (aligned 1 0))
    'uint16
    8)
   (vec-cast
    (sca-broadcast
     (load-sca (buffer mat_a 'uint8) (sca-add (var-lookup 't5371) 3))
     8)
    'uint16
    8))
  'uint32
  8))


synthesize-x86 output:
#<void>
#f
