#!/bin/bash

basedir=`dirname $0`
cd $basedir
. ../../setup-env.sh
set -x

rm -fr tmp 
mkdir tmp
mkdir -p ir

g++ --std=c++11  -DLOG2VLEN=7 -DRUN=1 -DASSEMBLY=1 -DBITCODE=1 -I /home/maaz/Desktop/Research/rake/halide/distrib/include -I /home/maaz/Desktop/Research/rake/halide/distrib/tools -fno-rtti -O3 -g src/gaussian7x7_generator.cpp $HALIDE_ROOT/tools/GenGen.cpp -L/home/maaz/Desktop/Research/rake/halide/distrib/lib  -lHalide -o tmp/gaussian7x7_generator -ldl -lpthread -lz  -lz -lrt -ltinfo

export LD_LIBRARY_PATH=/home/maaz/Desktop/Research/rake/halide/distrib/lib:; (./tmp/gaussian7x7_generator -o tmp -e o,h,assembly,bitcode -g gaussian7x7 -f gaussian7x7_hvx64 target=hexagon-32-noos-no_bounds_query-no_asserts-hvx_64) &> ir/gaussian7x7_hvx64.ir
export LD_LIBRARY_PATH=/home/maaz/Desktop/Research/rake/halide/distrib/lib:; (./tmp/gaussian7x7_generator -o tmp -e o,h,assembly,bitcode -g gaussian7x7 -f gaussian7x7_hvx128 target=hexagon-32-noos-no_bounds_query-no_asserts-hvx_128) &> ir/gaussian7x7_hvx128.ir

rm -fr tmp
